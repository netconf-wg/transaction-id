<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Transaction ID Mechanism for NETCONF</title>
<meta content="Jan Lindblad" name="author">
<meta content="
       NETCONF clients and servers often need to have a synchronized view of
the server's configuration data stores.  The volume of configuration
data in a server may be very large, while data store changes typically
are small when observed at typical client resynchronization intervals. 
       Rereading the entire data store and analyzing the response for changes
is an inefficient mechanism for synchronization.  This document
specifies an extension to NETCONF that allows clients and servers to
keep synchronized with a much smaller data exchange and without any
need for servers to store information about the clients. 
    " name="description">
<meta content="xml2rfc 3.21.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-netconf-transaction-id-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.21.0
    Python 3.12.3
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 4.9.4
    platformdirs 4.2.2
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 69.5.1
    six 1.16.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-netconf-transaction-id.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl > dt {
  float: left;
  margin-right: 1em;
  min-width: 12ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
dl .break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: 14.5px;
}
.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 8em !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([stroke="fill"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">NCTID</td>
<td class="right">June 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lindblad</td>
<td class="center">Expires 21 December 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">NETCONF</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-netconf-transaction-id-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-06-19" class="published">19 June 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-12-21">21 December 2024</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">J. Lindblad</div>
<div class="org">Cisco Systems</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Transaction ID Mechanism for NETCONF</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">NETCONF clients and servers often need to have a synchronized view of
the server's configuration data stores.  The volume of configuration
data in a server may be very large, while data store changes typically
are small when observed at typical client resynchronization intervals.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">Rereading the entire data store and analyzing the response for changes
is an inefficient mechanism for synchronization.  This document
specifies an extension to NETCONF that allows clients and servers to
keep synchronized with a much smaller data exchange and without any
need for servers to store information about the clients.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this document takes place on the
    Network Configuration Working Group mailing list (netconf@ietf.org),
    which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/netconf/">https://mailarchive.ietf.org/arch/browse/netconf/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/netconf-wg/transaction-id">https://github.com/netconf-wg/transaction-id</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 21 December 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-netconf-txid-extension" class="internal xref">NETCONF Txid Extension</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-use-cases" class="internal xref">Use Cases</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-general-txid-principles" class="internal xref">General Txid Principles</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-initial-configuration-retri" class="internal xref">Initial Configuration Retrieval</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-subsequent-configuration-re" class="internal xref">Subsequent Configuration Retrieval</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="auto internal xref">3.5</a>.  <a href="#name-candidate-datastore-configu" class="internal xref">Candidate Datastore Configuration Retrieval</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6">
                <p id="section-toc.1-1.3.2.6.1"><a href="#section-3.6" class="auto internal xref">3.6</a>.  <a href="#name-conditional-transactions" class="internal xref">Conditional Transactions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6.2.1">
                    <p id="section-toc.1-1.3.2.6.2.1.1"><a href="#section-3.6.1" class="auto internal xref">3.6.1</a>.  <a href="#name-error-response-on-out-of-ba" class="internal xref">Error response on Out of band change</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6.2.2">
                    <p id="section-toc.1-1.3.2.6.2.2.1"><a href="#section-3.6.2" class="auto internal xref">3.6.2</a>.  <a href="#name-txid-history-size-considera" class="internal xref">Txid History size consideration</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.7">
                <p id="section-toc.1-1.3.2.7.1"><a href="#section-3.7" class="auto internal xref">3.7</a>.  <a href="#name-candidate-datastore-transac" class="internal xref">Candidate Datastore Transactions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.8">
                <p id="section-toc.1-1.3.2.8.1"><a href="#section-3.8" class="auto internal xref">3.8</a>.  <a href="#name-dependencies-within-transac" class="internal xref">Dependencies within Transactions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.9">
                <p id="section-toc.1-1.3.2.9.1"><a href="#section-3.9" class="auto internal xref">3.9</a>.  <a href="#name-other-netconf-operations" class="internal xref">Other NETCONF Operations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.10">
                <p id="section-toc.1-1.3.2.10.1"><a href="#section-3.10" class="auto internal xref">3.10</a>. <a href="#name-yang-push-subscriptions" class="internal xref">YANG-Push Subscriptions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.11">
                <p id="section-toc.1-1.3.2.11.1"><a href="#section-3.11" class="auto internal xref">3.11</a>. <a href="#name-comparing-yang-datastores" class="internal xref">Comparing YANG Datastores</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-txid-mechanisms" class="internal xref">Txid Mechanisms</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-the-etag-attribute-txid-mec" class="internal xref">The etag attribute txid mechanism</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-the-last-modified-attribute" class="internal xref">The last-modified attribute txid mechanism</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-common-features-to-both-eta" class="internal xref">Common features to both etag and last-modified txid mechanisms</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="auto internal xref">4.3.1</a>.  <a href="#name-candidate-datastore" class="internal xref">Candidate Datastore</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a href="#section-4.3.2" class="auto internal xref">4.3.2</a>.  <a href="#name-namespaces-and-attribute-pl" class="internal xref">Namespaces and Attribute Placement</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-txid-mechanism-examples" class="internal xref">Txid Mechanism Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-initial-configuration-respo" class="internal xref">Initial Configuration Response</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="auto internal xref">5.1.1</a>.  <a href="#name-with-etag" class="internal xref">With etag</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="auto internal xref">5.1.2</a>.  <a href="#name-with-last-modified" class="internal xref">With last-modified</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-configuration-response-prun" class="internal xref">Configuration Response Pruning</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-configuration-change" class="internal xref">Configuration Change</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-conditional-configuration-c" class="internal xref">Conditional Configuration Change</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="auto internal xref">5.5</a>.  <a href="#name-reading-from-the-candidate-" class="internal xref">Reading from the Candidate Datastore</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a href="#section-5.6" class="auto internal xref">5.6</a>.  <a href="#name-commit" class="internal xref">Commit</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.7">
                <p id="section-toc.1-1.5.2.7.1"><a href="#section-5.7" class="auto internal xref">5.7</a>.  <a href="#name-yang-push" class="internal xref">YANG-Push</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.8">
                <p id="section-toc.1-1.5.2.8.1"><a href="#section-5.8" class="auto internal xref">5.8</a>.  <a href="#name-nmda-compare" class="internal xref">NMDA Compare</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-yang-modules" class="internal xref">YANG Modules</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-base-module-for-txid-in-net" class="internal xref">Base module for txid in NETCONF</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-additional-support-for-txid" class="internal xref">Additional support for txid in YANG-Push</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-additional-support-for-txid-" class="internal xref">Additional support for txid in NMDA Compare</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-nacm-access-control" class="internal xref">NACM Access Control</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a href="#section-7.1.1" class="auto internal xref">7.1.1</a>.  <a href="#name-hash-based-txid-algorithms" class="internal xref">Hash-based Txid Algorithms</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-unchanged-configuration" class="internal xref">Unchanged Configuration</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-changes" class="internal xref">Changes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-major-changes-in-04-since-0" class="internal xref">Major changes in -04 since -03</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-major-changes-in-03-since-0" class="internal xref">Major changes in -03 since -02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.  <a href="#name-major-changes-in-02-since-0" class="internal xref">Major changes in -02 since -01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="auto internal xref">9.4</a>.  <a href="#name-major-changes-in-01-since-0" class="internal xref">Major changes in -01 since -00</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.5">
                <p id="section-toc.1-1.9.2.5.1"><a href="#section-9.5" class="auto internal xref">9.5</a>.  <a href="#name-major-changes-in-draft-ietf" class="internal xref">Major changes in draft-ietf-netconf-transaction-id-00 since -02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.6">
                <p id="section-toc.1-1.9.2.6.1"><a href="#section-9.6" class="auto internal xref">9.6</a>.  <a href="#name-major-changes-in-02-since-01" class="internal xref">Major changes in -02 since -01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.7">
                <p id="section-toc.1-1.9.2.7.1"><a href="#section-9.7" class="auto internal xref">9.7</a>.  <a href="#name-major-changes-in-01-since-00" class="internal xref">Major changes in -01 since -00</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">When a NETCONF client wishes to initiate a new configuration transaction
with a NETCONF server, a frequently occurring use case is for the
client to find out if the configuration has changed since the client
last communicated with the server.  Such changes could occur for
example if another NETCONF client has made changes, or another system
or operator made changes through other means than NETCONF.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">One way of detecting a change for a client would be to
retrieve the entire configuration from the server, then compare
the result with a previously stored copy at the client side.  This
approach is not popular with most NETCONF users, however, since it
would often be very expensive in terms of communications and
computation cost.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Furthermore, even if the configuration is reported to be unchanged,
that will not guarantee that the configuration remains unchanged
when a client sends a subsequent change request, a few moments later.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">In order to simplify the task of tracking changes, a NETCONF server
could implement a meta level transaction tag or timestamp for an entire
configuration datastore or YANG subtree, and offer clients a way to
read and compare this tag or timestamp.  If the tag or timestamp is
unchanged, clients can avoid performing expensive operations.  Such
tags and timestamps are referred to as a transaction id (txid) in this
document.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">Evidence of a transaction id feature being demanded by clients is that
several server implementors have built proprietary and mutually
incompatible mechanisms for obtaining a transaction id from a NETCONF
server.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">RESTCONF, <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>,
defines a mechanism for detecting changes in configuration subtrees
based on Entity-Tags (ETags) and Last-Modified txid values.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">In conjunction with this, RESTCONF
provides a way to make configuration changes conditional on the server
configuration being untouched by others.  This mechanism leverages
<span>[<a href="#RFC7232" class="cite xref">RFC7232</a>]</span>
"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests".<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">This document defines similar functionality for NETCONF,
<span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>, for config true data.  It also ties this in
with YANG-Push, <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, and "Comparison of Network
Management Datastore Architecture (NMDA) Datastores",
<span>[<a href="#RFC9144" class="cite xref">RFC9144</a>]</span>.  Config false data (operational data, state, statistics)
is left out of scope from this document.<a href="#section-1-8" class="pilcrow">¶</a></p>
<p id="section-1-9">This document does not change the RESTCONF protocol in any way, and
is carefully written to allow implementations to share much of the
code between NETCONF and RESTCONF.  Note that the NETCONF txid
mechanism described in this document uses XML attributes, but the
RESTCONF mechanism relies on HTTP Headers instead, and use none of
the XML attributes described in this document, nor JSON Metadata
(see <span>[<a href="#RFC7952" class="cite xref">RFC7952</a>]</span>).<a href="#section-1-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
"MAY", and "OPTIONAL" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">This document uses the terminology defined in
<span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>,
<span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span>,
<span>[<a href="#RFC7952" class="cite xref">RFC7952</a>]</span>,
<span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>,
<span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, and
<span>[<a href="#RFC9144" class="cite xref">RFC9144</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">In addition, this document defines the following terms:<a href="#section-2-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-4">
        <dt id="section-2-4.1">Versioned node</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.2">
          <p id="section-2-4.2.1">A node in the instantiated YANG data tree for which
the server maintains a transaction id (txid) value.<a href="#section-2-4.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.3">Transaction-id Mechanism</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.4">
          <p id="section-2-4.4.1">A protocol implementation that fulfills the principles described in
the first part, <span><a href="#netconf-txid-extension" class="internal xref">NETCONF Txid Extension</a> (<a href="#netconf-txid-extension" class="auto internal xref">Section 3</a>)</span>, of
this document.<a href="#section-2-4.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.5">Txid</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.6">
          <p id="section-2-4.6.1">Abbreviation of Transaction-id<a href="#section-2-4.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.7">C-txid</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.8">
          <p id="section-2-4.8.1">Client side transaction-id, i.e. a txid value maintained or provided
by a NETCONF client application.<a href="#section-2-4.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.9">S-txid</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.10">
          <p id="section-2-4.10.1">Server side transaction-id, i.e. a txid value maintained or sent by
a NETCONF server.<a href="#section-2-4.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-4.11">Txid History</dt>
        <dd style="margin-left: 1.5em" id="section-2-4.12">
          <p id="section-2-4.12.1">Temporally ordered list of txid values used by the server.  Allows
the server to determine if a given txid occurred more recently than
another txid.<a href="#section-2-4.12.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="netconf-txid-extension">
<section id="section-3">
      <h2 id="name-netconf-txid-extension">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-netconf-txid-extension" class="section-name selfRef">NETCONF Txid Extension</a>
      </h2>
<p id="section-3-1">This document describes a NETCONF extension which modifies the
behavior of get-config, get-data, edit-config, edit-data,
discard-changes, copy-config, delete-config and commit such
that clients are able to conditionally retrieve and update the
configuration in a NETCONF server.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">For servers implementing YANG-Push, an extension for conveying txid
updates as part of subscription updates is also defined.  A similar
extension is also defined for servers implememnting
"Comparison of NMDA Datastores".<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">Several low level mechanisms could be defined to fulfill the
requirements for efficient client-server txid synchronization.
This document defines two such mechanisms, the etag txid mechanism
and the last-modified txid mechanism. Additional mechanisms could
be added in future.  This document is therefore divided into a two
parts; the first part discusses the txid mechanism in an abstract,
protocol-neutral way.  The second part,
<span><a href="#txid-mechanisms" class="internal xref">Txid Mechanisms</a> (<a href="#txid-mechanisms" class="auto internal xref">Section 4</a>)</span>, then adds the protocol layer,
and provides concrete encoding examples.<a href="#section-3-3" class="pilcrow">¶</a></p>
<div id="use-cases">
<section id="section-3.1">
        <h3 id="name-use-cases">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-use-cases" class="section-name selfRef">Use Cases</a>
        </h3>
<p id="section-3.1-1">The common use cases for txid mecahnisms are briefly discussed here.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1-2">
          <dt id="section-3.1-2.1">Initial configuration retrieval</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.2">
            <p id="section-3.1-2.2.1">When the client initially connects to a server, it may be interested
to acquire a current view of (parts of) the server's configuration.
In order to be able to efficiently detect changes later, it may also
be interested to store meta level txid information for
subtrees of the configuration.<a href="#section-3.1-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.3">Subsequent configuration retrieval</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.4">
            <p id="section-3.1-2.4.1">When a client needs to reread (parts of) the server's configuration,
it may be interested to leverage the txid meta data it has
stored by requesting the server to prune the response so that it does
not repeat configuration data that the client is already aware of.<a href="#section-3.1-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.5">Configuration update with txid return</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.6">
            <p id="section-3.1-2.6.1">When a client issues a transaction towards a server, it may be
interested to also learn the new txid meta data the server
has stored for the updated parts of the configuration.<a href="#section-3.1-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.7">Conditional configuration change</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.8">
            <p id="section-3.1-2.8.1">When a client issues a transaction towards a server, it may specify
txid meta data for the transaction in order to allow the server to
verify that the client is up to date with any changes in the parts of
the configuration that it is concerned with.  If the txid
meta data in the server is different than the client expected, the
server rejects the transaction with a specific error message.<a href="#section-3.1-2.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-2.9">Subscribe to configuration changes with txid return</dt>
          <dd style="margin-left: 1.5em" id="section-3.1-2.10">
            <p id="section-3.1-2.10.1">When a client subscribes to configuration change updates through
YANG-Push, it may be interested to also learn the the updated txid
meta data for the changed data trees.<a href="#section-3.1-2.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="general-txid-principles">
<section id="section-3.2">
        <h3 id="name-general-txid-principles">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-general-txid-principles" class="section-name selfRef">General Txid Principles</a>
        </h3>
<p id="section-3.2-1">All servers implementing a txid mechanism MUST maintain a top level
server side txid meta data value for each configuration datastore
supported by the server.  Server side txid is often abbreviated s-txid.
Txid mechanism implementations MAY also maintain txid
meta data values for nodes deeper in the YANG data tree.  The nodes
for which the server maintains txids are collectively referred to as
the "Versioned Nodes".<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">Server implementors MAY use the YANG extension statement
ietf-netconf-txid:versioned-node to inform potential clients about
which YANG nodes the server maintains a txid value for.  Another way
to discover (a partial) set of Versioned Nodes is for a client to
request the current configuration with txids.  The returned
configuration will then have the Versioned Nodes decorated with their
txid values.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">Regardless of whether the server declares the Versioned Nodes or not,
the set of Versioned Nodes in the server's YANG tree MUST remain
constant, except at system redefining events, such as software upgrades
or entitlement installations or removals.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">The server returning txid values for the Versioned Nodes
MUST ensure the txid values are changed every time there has
been a configuration change at or below the node associated with
the txid value.  This means any update of a config true node will
result in a new txid value for all ancestor Versioned Nodes, up
to and including the datastore root itself.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">This also means a server MUST update the txid value for any
nodes that change as a result of a configuration change, and their
ancestors, regardless
of source, even if the changed nodes are not explicitly part
of the change payload.  An example of this is dependent data under
YANG <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span> when- or choice-statements.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
<p id="section-3.2-6">The server MUST NOT change the txid value of a versioned node
unless the node itself or a child node of that node has
been changed.  The server MUST NOT change any txid values due to
changes in config false data, or any kind of metadata that the
server may maintain for YANG data tree nodes.<a href="#section-3.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="initial-configuration-retrieval">
<section id="section-3.3">
        <h3 id="name-initial-configuration-retri">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-initial-configuration-retri" class="section-name selfRef">Initial Configuration Retrieval</a>
        </h3>
<p id="section-3.3-1">When a NETCONF server receives a get-config or get-data request
containing requests for txid values, it MUST, in the reply, return
txid values for all Versioned Nodes below the point requested by
the client.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">The exact encoding varies by mechanism, but all txid mechanisms
would have a special "txid-request" txid value (e.g. "?") which is
guaranteed to never be used as a normal txid value.  Clients MAY use
this special txid value associated with one or more nodes in the
data tree to indicate to the server that they are interested in
txid values below that point of the data tree.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<span id="name-initial-configuration-retrie"></span><div id="fig-baseline">
<figure id="figure-1">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.3-3.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config (txid: ?)                          |
       |     acls                                        |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   data (txid: 5152)                             |
       |     acls (txid: 5152)                           |
       |       acl A1 (txid: 4711)                       |
       |         aces (txid: 4711)                       |
       |           ace R1 (txid: 4711)                   |
       |             matches ipv4 protocol 17            |
       |             actions forwarding accept           |
       |       acl A2 (txid: 5152)                       |
       |         aces (txid: 5152)                       |
       |           ace R7 (txid: 4711)                   |
       |             matches ipv4 dscp 10                |
       |             actions forwarding accept           |
       |           ace R8 (txid: 5152)                   |
       |             matches udp source-port port 22     |
       |             actions forwarding accept           |
       |           ace R9 (txid: 5152)                   |
       |             matches tcp source-port port 22     |
       |             actions forwarding accept           |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-initial-configuration-retrie" class="selfRef">Initial Configuration Retrieval.  The client annotated the get-config request itself with the txid request value, which makes the server return all txid values in the entire datastore, that also fall within the requested subtree filter.  The most recent change seems to have been an update to ace R8 and R9.</a>
          </figcaption></figure>
</div>
<p id="section-3.3-4">In the call flow examples in this document we are using a 4-digit,
monotonously increasing integer as txid.  This is convenient and
enhances readability of the examples, but does not necessarily
reflect a typical implementation.<a href="#section-3.3-4" class="pilcrow">¶</a></p>
<p id="section-3.3-5">In principle, txid values are opaque strings that uniquely identify
a particular configuration state.  Servers are expected to know which
txid values it has used in the recent past, and in which order they
were assigned to configuration change transactions.  This information
is known as the server's Txid History.<a href="#section-3.3-5" class="pilcrow">¶</a></p>
<p id="section-3.3-6">How many historical txid values to track is up to each server
implementor to decide, and a server MAY decide not to store any
historical txid values at all.  The more txid values in the server's
Txid History, the more efficient the client synchronization may be, as
described in the coming sections.<a href="#section-3.3-6" class="pilcrow">¶</a></p>
<p id="section-3.3-7">Some server implementors may decide to use a monotonically increasing
integer as the txid value, or a timestamp.  Doing so obviously makes
it very easy for the server to determine the sequence of historical
transaction ids.<a href="#section-3.3-7" class="pilcrow">¶</a></p>
<p id="section-3.3-8">Some server implementors may decide to use a completely different txid
value sequence, to the point that the sequence may appear completely
random to outside observers.  Clients MUST NOT generally assume that
servers use a txid value scheme that reveals information about the
temporal sequence of txid values.<a href="#section-3.3-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="subsequent-configuration-retrieval">
<section id="section-3.4">
        <h3 id="name-subsequent-configuration-re">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-subsequent-configuration-re" class="section-name selfRef">Subsequent Configuration Retrieval</a>
        </h3>
<p id="section-3.4-1">Clients MAY request the server to return txid values in the response
by adding one or more txid values received previously in get-config or
get-data requests.  Txid values sent by a client are often abbreviated
c-txid.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">When a client sends in a c-txid value of a node that matches the
server's s-txid value for that Versioned Node, or matches a more recent
s-txid value in the server's Txid History,
the server prunes (does not return) that subtree from
the response.  Since the client already knows the txid for this part
of the data tree, or a txid that occurred more recently, it
is obviosuly already up to date with that part of the configuration.
Sending it again would be a waste of time and energy.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">The table below describes in detail how the client side (c-txid) and
server side txid (s-txid) values are determined and compared when the
server processes each data tree reply node from a get-config or
get-data request.<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<p id="section-3.4-4">Servers MUST process each of the config true nodes as follows:<a href="#section-3.4-4" class="pilcrow">¶</a></p>
<span id="name-the-txid-rules-for-response"></span><table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-the-txid-rules-for-response" class="selfRef">The Txid rules for response pruning.</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Case</th>
              <th class="text-left" rowspan="1" colspan="1">Condition</th>
              <th class="text-left" rowspan="1" colspan="1">Behavior</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">1. NO CLIENT TXID</td>
              <td class="text-left" rowspan="1" colspan="1">In its request, the client did not specify a c-txid value for the current node, nor any ancestor of this node.</td>
              <td class="text-left" rowspan="1" colspan="1">In this case, the server MUST return the current node according to the normal NETCONF specifications.  The rules below do not apply to the current node.  Any child nodes MUST also be evaluated with respect to these rules.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2. CLIENT ANCESTOR TXID</td>
              <td class="text-left" rowspan="1" colspan="1">The client did not specify a c-txid value for the current node, but did specify a c-txid value for one or more ancestors of this node.</td>
              <td class="text-left" rowspan="1" colspan="1">In this case, the current node MUST inherit the c-txid value of the closest ancestor node in the client's request that has a c-txid value.  Processing of the current node continues according to the rules below.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">3. SERVER ANCESTOR TXID</td>
              <td class="text-left" rowspan="1" colspan="1">The node is not a Versioned Node, i.e. the server does not maintain a s-txid value for this node.</td>
              <td class="text-left" rowspan="1" colspan="1">In this case, the current node MUST inherit the server's s-txid value of the closest ancestor that is a Versioned Node (has a server side s-txid value).  The datastore root is always a Versioned Node.  Processing of the current node continues according to the rules below.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4. CLIENT TXID UP TO DATE</td>
              <td class="text-left" rowspan="1" colspan="1">The client specified c-txid for the current node value is "up to date", i.e. it matches the server's s-txid value, or matches a s-txid value from the server's Txid History that is more recent than the server's s-txid value for this node.</td>
              <td class="text-left" rowspan="1" colspan="1">In this case the server MUST return the node decorated with a special "txid-match" txid value (e.g. "=") to the matching node, pruning any value and child nodes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">5. CLIENT TXID OUT OF DATE</td>
              <td class="text-left" rowspan="1" colspan="1">The specified c-txid is "outdated" or "unknown" to the server, i.e. it does not match the server's s-txid value for this node, nor does the client c-txid value match any s-txid value in the server's Txid History that is more recent than the server's s-txid value for this node.</td>
              <td class="text-left" rowspan="1" colspan="1">In this case the server MUST return the current node according to the normal NETCONF specifications.  If the current node is a Versioned Node, it MUST be decorated with the s-txid value.  Any child nodes MUST also be evaluated with respect to these rules.</td>
            </tr>
          </tbody>
        </table>
<p id="section-3.4-6">For list elements, pruning child nodes means that top-level
key nodes MUST be included in the response, and other child nodes
MUST NOT be included.  For containers, child nodes MUST NOT
be included.<a href="#section-3.4-6" class="pilcrow">¶</a></p>
<p id="section-3.4-7">Here follows a couple of examples of how the rules above are applied.
See <span><a href="#fig-baseline" class="internal xref">the example above</a> (<a href="#fig-baseline" class="auto internal xref">Figure 1</a>)</span> for the most recent server
configuration state that the client is aware of, before this happens:<a href="#section-3.4-7" class="pilcrow">¶</a></p>
<span id="name-response-pruning-client-sen"></span><figure id="figure-2">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.4-8.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config                                    |
       |     acls (txid: 5152)                           |
       |       acl A1 (txid: 4711)                       |
       |         aces (txid: 4711)                       |
       |       acl A2 (txid: 5152)                       |
       |         aces (txid: 5152)                       |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   data                                          |
       |     acls (txid: =)                              |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-response-pruning-client-sen" class="selfRef">Response Pruning.  Client sends get-config request with known txid values.  Server prunes response where the c-txid matches expectations.  In this case, the server had no changes, and pruned the response at the earliest point offered by the client.</a>
          </figcaption></figure>
<p id="section-3.4-9">In this case, the server's txid-based pruning saved a substantial
amount of information that is already known by the client to be sent
to and processed by the client.<a href="#section-3.4-9" class="pilcrow">¶</a></p>
<p id="section-3.4-10">In the following example someone has made a change to the
configuration on the server.  This server has chosen to implement
a Txid History with up to 5 entries.  The 5 most recently used
s-txid values on this example server are currently: 4711, 5152, 5550,
6614, 7770 (most recent).  Then a client sends this request:<a href="#section-3.4-10" class="pilcrow">¶</a></p>
<span id="name-out-of-band-change-detected"></span><figure id="figure-3">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.4-11.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config                                    |
       |     acls (txid: 5152)                           |
       |       acl A1 (txid: 4711)                       |
       |       acl A2 (txid: 5152)                       |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   data                                          |
       |     acls (txid: 6614)                           |
       |       acl A1 (txid: =)                          |
       |       acl A2 (txid: 6614)                       |
       |         aces (txid: 6614)                       |
       |           ace R7 (txid: =)                      |
       |           ace R8 (txid: =)                      |
       |           ace R9 (txid: 6614)                   |
       |             matches tcp source-port port 830    |
       |             actions forwarding accept           |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-out-of-band-change-detected" class="selfRef">Out of band change detected.  Client sends get-config request with known txid values.  Server provides updates only where changes have happened.</a>
          </figcaption></figure>
<p id="section-3.4-12">In the example above, the server returns the acls container because
the client supplied c-txid value (5152) differs from the s-txid value
held by the server (6614), and 5152 is less recent in the server's
Txid History than 6614.  The client is apparently unaware of the
latest config developments in this part of the server config tree.<a href="#section-3.4-12" class="pilcrow">¶</a></p>
<p id="section-3.4-13">The server prunes list entry acl A1 is because it has the same s-txid
value as the c-txid supplied by the client (4711). The server returns
the list entry acl A2 because 5152 (specified by the client) is less
recent than 6614 (held by the server).<a href="#section-3.4-13" class="pilcrow">¶</a></p>
<p id="section-3.4-14">The container aces under acl A2 is returned because 5152 is less recent
than 6614. The server prunes ace R7 because the c-txid for this
node is 5152 (from acl A2), and 5152 is more recent than the closest
ancestor Versioned Node (with txid 4711).<a href="#section-3.4-14" class="pilcrow">¶</a></p>
<p id="section-3.4-15">The server also prunes acl R8 because the server and client txids
exactly match (5152). Finally, acl R9 is returned because of its less
recent c-txid value given by the client (5152, on the closest ancestor
acl A2) than the s-txid held on the server (6614).<a href="#section-3.4-15" class="pilcrow">¶</a></p>
<p id="section-3.4-16">In the next example, the client specifies the c-txid for a node that
the server does not maintain a s-txid for, i.e. it's not a
Versioned Node.<a href="#section-3.4-16" class="pilcrow">¶</a></p>
<span id="name-versioned-nodes-server-look"></span><figure id="figure-4">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.4-17.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config                                    |
       |     acls                                        |
       |       acls A2                                   |
       |         aces                                    |
       |           ace R7                                |
       |             matches                             |
       |               ipv4                              |
       |                 dscp (txid: 4711)               |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   data                                          |
       |     acls                                        |
       |       acl A2                                    |
       |         aces                                    |
       |           ace R7                                |
       |             matches                             |
       |               ipv4                              |
       |                 dscp (txid: =)                  |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-versioned-nodes-server-look" class="selfRef">Versioned Nodes.  Server lookup of dscp txid gives 4711, as closest ancestor is ace R7 with txid 4711.  Since the server's and client's txid match, the etag value is '=', and the leaf value is pruned.</a>
          </figcaption></figure>
<p id="section-3.4-18">Here, the server looks up the closest ancestor node that is a
Versioned Node.  This particular server has chosen to keep a s-txid
for the list entry ace R7, but not for any of its children.  Thus
the server finds the server side s-txid value to be 4711 (from ace R7),
which matches the client's c-txid value of 4711.<a href="#section-3.4-18" class="pilcrow">¶</a></p>
<p id="section-3.4-19">Servers MUST NOT ever use the special txid values, txid-match, txid-request, txid-unknown (e.g. "=", "?", "!") as actual
txid values.<a href="#section-3.4-19" class="pilcrow">¶</a></p>
</section>
</div>
<div id="candidate-datastore-configuration-retrieval">
<section id="section-3.5">
        <h3 id="name-candidate-datastore-configu">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-candidate-datastore-configu" class="section-name selfRef">Candidate Datastore Configuration Retrieval</a>
        </h3>
<p id="section-3.5-1">When a client retrieves the configuration from the (or a) candidate
datastore, some of the configuration nodes may hold the same data as
the corresponding node in the running datastore.  In such cases, the
server MUST return the same s-txid value for nodes in the candidate
datastore as in the running datastore.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">If a node in the candidate datastore holds different data than in the
running datastore, the server has a choice of what to return.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.5-3.1">
            <p id="section-3.5-3.1.1">The server MAY return a txid-unknown value (e.g. "!").  This may
be convenient in servers that do not know a priori what txids will
be used in a future, possible commit of the canidate.<a href="#section-3.5-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.5-3.2">
            <p id="section-3.5-3.2.1">If the txid-unknown value is not returned, the server MUST return
 the s-txid value the node will have after commit, assuming the client
 makes no further changes of the candidate datastore.  If a client
 makes further changes in the candidate datastore, the s-txid value
 MAY change.<a href="#section-3.5-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.5-4">See the example in
<span><a href="#candidate-datastore-transactions" class="internal xref">Candidate Datastore Transactions</a> (<a href="#candidate-datastore-transactions" class="auto internal xref">Section 3.7</a>)</span>.<a href="#section-3.5-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conditional-transactions">
<section id="section-3.6">
        <h3 id="name-conditional-transactions">
<a href="#section-3.6" class="section-number selfRef">3.6. </a><a href="#name-conditional-transactions" class="section-name selfRef">Conditional Transactions</a>
        </h3>
<p id="section-3.6-1">Conditional transactions are useful when a client is interested
to make a configuration change, being sure that relevant parts of
the server configuration have not changed since the client last
inspected it.<a href="#section-3.6-1" class="pilcrow">¶</a></p>
<p id="section-3.6-2">By supplying the latest c-txid values known to the client
in its change requests (edit-config etc.), it can request the server
to reject the transaction in case any relevant changes have occurred
at the server that the client is not yet aware of.<a href="#section-3.6-2" class="pilcrow">¶</a></p>
<p id="section-3.6-3">This allows a client to reliably compute and send configuration
changes to a server without either acquiring a global datastore lock
for a potentially extended period of time, or risk that a change
from another client disrupts the intent in the time window between a
read (get-config etc.) and write (edit-config etc.) operation.<a href="#section-3.6-3" class="pilcrow">¶</a></p>
<p id="section-3.6-4">Clients that are also interested to know the s-txid assigned to the
modified Versioned Nodes in the model immediately in the
response could set a flag in the rpc message to request the server
to return the new s-txid with the ok message.<a href="#section-3.6-4" class="pilcrow">¶</a></p>
<span id="name-conditional-transaction-tow"></span><div id="base-edit-config">
<figure id="figure-5">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.6-5.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   edit-config (request new txid in response)    |
       |     config (txid: 5152)                         |
       |       acls (txid: 5152)                         |
       |         acl A1 (txid: 4711)                     |
       |           aces (txid: 4711)                     |
       |             ace R1 (txid: 4711)                 |
       |               matches ipv4 protocol 6           |
       |               actions forwarding accept         |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   ok (txid: 7688)                               |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-conditional-transaction-tow" class="selfRef">Conditional transaction towards the Running datastore successfully executed.  As all the txid values specified by the client matched those on the server, the transaction was successfully executed.</a>
          </figcaption></figure>
</div>
<p id="section-3.6-6">After the above edit-config, the client might issues a get-config to
observe the change.  It would look like this:<a href="#section-3.6-6" class="pilcrow">¶</a></p>
<span id="name-the-txids-are-updated-on-al"></span><figure id="figure-6">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.6-7.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config                                    |
       |     acls (txid: ?)                              |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   data                                          |
       |     acls (txid: 7688)                           |
       |       acl A1 (txid: 7688)                       |
       |         aces (txid: 7688)                       |
       |           ace R1 (txid: 7688)                   |
       |             matches ipv4 protocol 6             |
       |             actions forwarding accept           |
       |       acl A2 (txid: 6614)                       |
       |         aces (txid: 6614)                       |
       |           ace R7 (txid: 4711)                   |
       |             matches ipv4 dscp 10                |
       |             actions forwarding accept           |
       |           ace R8 (txid: 5152)                   |
       |             matches udp source-port port 22     |
       |             actions forwarding accept           |
       |           ace R9 (txid: 6614)                   |
       |             matches tcp source-port port 830    |
       |             actions forwarding accept           |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-the-txids-are-updated-on-al" class="selfRef">The txids are updated on all Versioned Nodes that were modified themselves or have a child node that was modified.</a>
          </figcaption></figure>
<p id="section-3.6-8">When a client sends in a c-txid value of a node, the server MUST consider it a match if the server's s-txid value is identical to the client, or if the server's value is found earlier in the server's Txid History than the value supplied by the client.<a href="#section-3.6-8" class="pilcrow">¶</a></p>
<div id="error-response-on-out-of-band-change">
<section id="section-3.6.1">
          <h4 id="name-error-response-on-out-of-ba">
<a href="#section-3.6.1" class="section-number selfRef">3.6.1. </a><a href="#name-error-response-on-out-of-ba" class="section-name selfRef">Error response on Out of band change</a>
          </h4>
<p id="section-3.6.1-1">If the server rejects the transaction because one or more of the
configuration s-txid value(s) differs from the client's expectation,
the server MUST return at least one rpc-error with the following
values:<a href="#section-3.6.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.6.1-2">
<pre>
   error-tag:      operation-failed
   error-type:     protocol
   error-severity: error
</pre><a href="#section-3.6.1-2" class="pilcrow">¶</a>
</div>
<p id="section-3.6.1-3">Additionally, the error-info tag MUST contain an sx:structure <span>[<a href="#RFC8791" class="cite xref">RFC8791</a>]</span>
containing relevant details about one of the mismatching txids.
A server MAY send multiple rpc-errors when multiple txid mismatches
are detected.<a href="#section-3.6.1-3" class="pilcrow">¶</a></p>
<span id="name-conditional-transaction-tha"></span><figure id="figure-7">
            <div class="alignLeft art-call-flow art-text artwork" id="section-3.6.1-4.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   edit-config                                   |
       |     config                                      |
       |       acls                                      |
       |         acl A1 (txid: 4711)                     |
       |           aces (txid: 4711)                     |
       |             ace R1 (txid: 4711)                 |
       |               matches ipv4 dscp 20              |
       |               actions forwarding accept         |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   rpc-error                                     |
       |     error-tag       operation-failed            |
       |     error-type      protocol                    |
       |     error-severity  error                       |
       |     error-info                                  |
       |       mismatch-path /acls/acl[A1]               |
       |       mismatch-etag-value 6912                  |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-conditional-transaction-tha" class="selfRef">Conditional transaction that fails a txid check.  The client wishes to ensure there has been no changes to the particular acl entry it edits, and therefore sends the c-txid it knows for this part of the configuration.  Since the s-txid has changed (out of band), the server rejects the configuration change request and reports an error with details about where the mismatch was detected.</a>
            </figcaption></figure>
</section>
</div>
<div id="txid-history-size-consideration">
<section id="section-3.6.2">
          <h4 id="name-txid-history-size-considera">
<a href="#section-3.6.2" class="section-number selfRef">3.6.2. </a><a href="#name-txid-history-size-considera" class="section-name selfRef">Txid History size consideration</a>
          </h4>
<p id="section-3.6.2-1">It may be tempting for a client implementor to send only the top
level c-txid value for the tree being edited.  In most cases, that
would certainly work just fine.  This is a way for the client to
request the server to go ahead with the change as long as there
has not been any changes more recent than the client provided c-txid.<a href="#section-3.6.2-1" class="pilcrow">¶</a></p>
<p id="section-3.6.2-2">Here the client is sending the same change as in
<span><a href="#base-edit-config" class="internal xref">the example above</a> (<a href="#base-edit-config" class="auto internal xref">Figure 5</a>)</span>, but with only one top level
c-txid value.<a href="#section-3.6.2-2" class="pilcrow">¶</a></p>
<span id="name-conditional-transaction-towa"></span><figure id="figure-8">
            <div class="alignLeft art-call-flow art-text artwork" id="section-3.6.2-3.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   edit-config (request new txid in response)    |
       |     config (txid: 5152)                         |
       |       acls                                      |
       |         acl A1                                  |
       |           aces                                  |
       |             ace R1                              |
       |               matches ipv4 protocol 6           |
       |               actions forwarding accept         |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   ok (txid: 7688)                               |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-conditional-transaction-towa" class="selfRef">Conditional transaction towards the Running datastore successfully executed.  As all the c-txid values specified by the client were the same or more recent in the server's Txid History, so the transaction was successfully executed.</a>
            </figcaption></figure>
<p id="section-3.6.2-4">This approach works well because the top level value is inherited
down in the child nodes and the server finds this value to either
match exactly or be a more recent s-txid value in the server's Txid
History.<a href="#section-3.6.2-4" class="pilcrow">¶</a></p>
<p id="section-3.6.2-5">The only caveat is that by relying on the server's Txid History being
long enough, the change could be rejected if the top level c-txid has
fallen out of the server's Txid History.  Some servers may have a
Txid History size of zero.  A client specifying a single top-level
c-txid value towards such a server would not be able to get the
transaction accepted.<a href="#section-3.6.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="candidate-datastore-transactions">
<section id="section-3.7">
        <h3 id="name-candidate-datastore-transac">
<a href="#section-3.7" class="section-number selfRef">3.7. </a><a href="#name-candidate-datastore-transac" class="section-name selfRef">Candidate Datastore Transactions</a>
        </h3>
<p id="section-3.7-1">When working with the (or a) Candidate datastore, the txid validation
happens at commit time, rather than at individual edit-config or
edit-data operations.  Clients add their c-txid attributes to the
configuration payload the same way.  In case a client specifies
different c-txid values for the same element in successive edit-config
or edit-data operations, the c-txid value specified last MUST be used
by the server at commit time.<a href="#section-3.7-1" class="pilcrow">¶</a></p>
<span id="name-conditional-transaction-towar"></span><figure id="figure-9">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.7-2.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   edit-config (operation: merge)                |
       |     config (txid: 5152)                         |
       |       acls (txid: 5152)                         |
       |         acl A1 (txid: 4711)                     |
       |           type ipv4                             |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   ok                                            |
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   edit-config (operation: merge)                |
       |     config                                      |
       |       acls                                      |
       |         acl A1                                  |
       |           aces (txid: 4711)                     |
       |             ace R1 (txid: 4711)                 |
       |               matches ipv4 protocol 6           |
       |               actions forwarding accept         |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   ok                                            |
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config                                    |
       |     config                                      |
       |       acls                                      |
       |         acl A1                                  |
       |           aces (txid: ?)                        |
       |                                                 |
       |   &lt;------------------------------------------   |
       |     config                                      |
       |       acls                                      |
       |         acl A1                                  |
       |           aces (txid: 7688  or !)               |
       |             ace R1 (txid: 7688 or !)            |
       |               matches ipv4 protocol 6           |
       |               actions forwarding accept         |
       |             ace R2 (txid: 2219)                 |
       |               matches ipv4 dscp 21              |
       |               actions forwarding accept         |
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   commit (request new txid in response)         |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   ok (txid: 7688)                               |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-conditional-transaction-towar" class="selfRef">Conditional transaction towards the Candidate datastore successfully executed.  As all the c-txid values specified by the client matched those on the server at the time of the commit, the transaction was successfully executed.  If a client issues a get-config towards the candidate datastore, the server may choose to return the special txid-unknown value (e.g. "!") or the s-txid value that would be used if the candidate was committed without further changes (when that s-txid value is known in advance by the server).</a>
          </figcaption></figure>
</section>
</div>
<div id="dependencies-within-transactions">
<section id="section-3.8">
        <h3 id="name-dependencies-within-transac">
<a href="#section-3.8" class="section-number selfRef">3.8. </a><a href="#name-dependencies-within-transac" class="section-name selfRef">Dependencies within Transactions</a>
        </h3>
<p id="section-3.8-1">YANG modules that contain when-statements referencing remote
parts of the model will cause the s-txid to change even in parts of the
data tree that were not modified directly.<a href="#section-3.8-1" class="pilcrow">¶</a></p>
<p id="section-3.8-2">Let's say there is an energy-example.yang module that defines a
mechanism for clients to request the server to measure the amount of
energy that is consumed by a given access control rule.  The
energy-example module augments the access control module as follows:<a href="#section-3.8-2" class="pilcrow">¶</a></p>
<div class="lang-yang sourcecode" id="section-3.8-3">
<pre>
module energy-example {
...

  container energy {
    leaf metering-enabled {
      type boolean;
      default false;
    }
  }

  augment /acl:acls/acl:acl {
    when /energy-example:energy/energy-example:metering-enabled;
    leaf energy-tracing {
      type boolean;
      default false;
    }
    leaf energy-consumption {
      config false;
      type uint64;
      units J;
    }
  }
}
</pre><a href="#section-3.8-3" class="pilcrow">¶</a>
</div>
<p id="section-3.8-4">This means there is a system wide switch leaf metering-enabled in
energy-example which disables all energy measurements in the system when
set to false, and that there is a boolean leaf energy-tracing that
controls whether energy measurement is happening for each acl rule
individually.<a href="#section-3.8-4" class="pilcrow">¶</a></p>
<p id="section-3.8-5">In this example, we have an initial configuration like this:<a href="#section-3.8-5" class="pilcrow">¶</a></p>
<span id="name-initial-configuration-for-t"></span><figure id="figure-10">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.8-6.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config                                    |
       |     energy (txid: ?)                            |
       |     acls (txid: ?)                              |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   data (txid: 7688)                             |
       |     energy metering-enabled true (txid: 4711)   |
       |     acls (txid: 7688)                           |
       |       acl A1 (txid: 7688)                       |
       |         energy-tracing false                    |
       |         aces (txid: 7688)                       |
       |           ace R1 (txid: 7688)                   |
       |             matches ipv4 protocol 6             |
       |             actions forwarding accept           |
       |       acl A2 (txid: 6614)                       |
       |         energy-tracing true                     |
       |         aces (txid: 6614)                       |
       |           ace R7 (txid: 4711)                   |
       |             matches ipv4 dscp 10                |
       |             actions forwarding accept           |
       |           ace R8 (txid: 5152)                   |
       |             matches udp source-port port 22     |
       |             actions forwarding accept           |
       |           ace R9 (txid: 6614)                   |
       |             matches tcp source-port port 830    |
       |             actions forwarding accept           |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-initial-configuration-for-t" class="selfRef">Initial configuration for the energy example.  Note the energy metering-enabled leaf at the top and energy-tracing leafs under each acl.</a>
          </figcaption></figure>
<p id="section-3.8-7">At this point, a client updates metering-enabled to false.  This causes
the when-expression on energy-tracing to turn false, removing the leaf
entirely.  This counts as a configuration change, and the s-txid MUST
be updated appropriately.<a href="#section-3.8-7" class="pilcrow">¶</a></p>
<span id="name-transaction-changing-a-sing"></span><figure id="figure-11">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.8-8.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   edit-config (request new txid in response)    |
       |     config                                      |
       |       energy metering-enabled false             |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   ok (txid: 9118)                               |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-transaction-changing-a-sing" class="selfRef">Transaction changing a single leaf.  This leaf is the target of a when-statement, however, which means other leafs elsewhere may be indirectly modified by this change.  Such indirect changes will also result in s-txid changes.</a>
          </figcaption></figure>
<p id="section-3.8-9">After the transaction above, the new configuration state has the
energy-tracing leafs removed.  Every such removal or (re)introduction
of a node counts as a configuration change from a txid perspective,
regardless of whether the change has any net configuration change
effect in the server.<a href="#section-3.8-9" class="pilcrow">¶</a></p>
<span id="name-the-txid-for-the-energy-sub"></span><figure id="figure-12">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.8-10.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   get-config                                    |
       |     energy (txid: ?)                            |
       |     acls (txid: ?)                              |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   data (txid: 9118)                             |
       |     energy metering-enabled false (txid: 9118)  |
       |     acls (txid: 9118)                           |
       |       acl A1 (txid: 9118)                       |
       |         aces (txid: 7688)                       |
       |           ace R1 (txid: 7688)                   |
       |             matches ipv4 protocol 6             |
       |             actions forwarding accept           |
       |       acl A2 (txid: 9118)                       |
       |         aces (txid: 6614)                       |
       |           ace R7 (txid: 4711)                   |
       |             matches ipv4 dscp 10                |
       |             actions forwarding accept           |
       |           ace R8 (txid: 5152)                   |
       |             matches udp source-port port 22     |
       |             actions forwarding accept           |
       |           ace R9 (txid: 6614)                   |
       |             matches tcp source-port port 830    |
       |             actions forwarding accept           |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-the-txid-for-the-energy-sub" class="selfRef">The txid for the energy subtree has changed since that was the target of the edit-config.  The txids of the ACLs have also changed since the energy-tracing leafs are now removed by the now false when-expression.  Both acl A1 and acl A2 have their txids updated, even though energy-tracing was already false for acl A1.</a>
          </figcaption></figure>
</section>
</div>
<div id="other-netconf-operations">
<section id="section-3.9">
        <h3 id="name-other-netconf-operations">
<a href="#section-3.9" class="section-number selfRef">3.9. </a><a href="#name-other-netconf-operations" class="section-name selfRef">Other NETCONF Operations</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-3.9-1">
          <dt id="section-3.9-1.1">discard-changes</dt>
          <dd style="margin-left: 1.5em" id="section-3.9-1.2">
            <p id="section-3.9-1.2.1">The discard-changes operation resets the candidate datastore to the
contents of the running datastore.  The server MUST ensure the
txid values in the candidate datastore get the same txid values
as in the running datastore when this operation runs.<a href="#section-3.9-1.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.9-1.3">copy-config</dt>
          <dd style="margin-left: 1.5em" id="section-3.9-1.4">
            <p id="section-3.9-1.4.1">The copy-config operation can be used to copy contents between
datastores.  The server MUST ensure the txid values are retained
and changed as if the data being copied had been sent in through an
edit-config operation.<a href="#section-3.9-1.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.9-1.5">delete-config</dt>
          <dd style="margin-left: 1.5em" id="section-3.9-1.6">
            <p id="section-3.9-1.6.1">The server MUST ensure the datastore txid value is changed, unless it
was already empty.<a href="#section-3.9-1.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-3.9-1.7">commit</dt>
          <dd style="margin-left: 1.5em" id="section-3.9-1.8">
            <p id="section-3.9-1.8.1">At commit, with regards to the txid values, the server MUST
treat the contents of the candidate datastore as if any txid
value provided by the client when updating the candidate was provided
in a single edit-config towards the running datastore.  If the
transaction is rejected due to txid value mismatch,
an rpc-error as described in section
<span><a href="#conditional-transactions" class="internal xref">Conditional Transactions</a> (<a href="#conditional-transactions" class="auto internal xref">Section 3.6</a>)</span> MUST be sent.<a href="#section-3.9-1.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="yang-push-subscriptions">
<section id="section-3.10">
        <h3 id="name-yang-push-subscriptions">
<a href="#section-3.10" class="section-number selfRef">3.10. </a><a href="#name-yang-push-subscriptions" class="section-name selfRef">YANG-Push Subscriptions</a>
        </h3>
<p id="section-3.10-1">A client issuing a YANG-Push establish-subscription or
modify-subscription request towards a server that supports
ietf-netconf-txid-yang-push.yang MAY request that the server
provides updated txid values in YANG-Push on-change subscription
updates.<a href="#section-3.10-1" class="pilcrow">¶</a></p>
<p id="section-3.10-2">This functionality pertains only to on-change updates.  This RPC may
also be invoked over RESTCONF or other protocols, and might
therefore be encoded in JSON.<a href="#section-3.10-2" class="pilcrow">¶</a></p>
<p id="section-3.10-3">To request txid values (e.g. etag), the client adds a flag in the
request (e.g. with-etag).  The server then returns the txid
(e.g. etag) value in the yang-patch payload (e.g. as etag-value).<a href="#section-3.10-3" class="pilcrow">¶</a></p>
<span id="name-a-client-requests-a-yang-pu"></span><figure id="figure-13">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.10-4.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   rpc                                           |
       |     establish-subscription                      |
       |       datastore running                         |
       |       datastore-xpath-filter /acls              |
       |       on-change                                 |
       |       with-etag true                            |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   ok                                            |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   notification                                  |
       |     eventTime 2022-04-04T06:00:24.16Z           |
       |     push-change-update                          |
       |       id 89                                     |
       |       datastore-changes                         |
       |         yang-patch                              |
       |           patch-id 0                            |
       |           edit                                  |
       |             edit-id edit1                       |
       |             operation delete                    |
       |             target /acls/acl[A1]                |
       |           edit                                  |
       |             edit-id edit2                       |
       |             operation merge                     |
       |             target /acls/acl[A2]/ace[R7]        |
       |               value                             |
       |                 matches ipv4 dscp 10            |
       |                 actions forwarding accept       |
       |           etag-value 8008                       |
       |                                                 |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-a-client-requests-a-yang-pu" class="selfRef">A client requests a YANG-Push subscription for a given path with txid value included.  When the server delivers a push-change-update notification, the txid value pertaining to the entire patch is included.</a>
          </figcaption></figure>
</section>
</div>
<div id="comparing-yang-datastores">
<section id="section-3.11">
        <h3 id="name-comparing-yang-datastores">
<a href="#section-3.11" class="section-number selfRef">3.11. </a><a href="#name-comparing-yang-datastores" class="section-name selfRef">Comparing YANG Datastores</a>
        </h3>
<p id="section-3.11-1">A client issuing an NMDA Datastore compare request towards a server
that supports ietf-netconf-txid-nmda-compare.yang MAY request that
the server provides updated txid values in the compare reply.
Besides NETCONF, this RPC may also be invoked over RESTCONF or other
protocols, and might therefore be encoded in JSON.<a href="#section-3.11-1" class="pilcrow">¶</a></p>
<p id="section-3.11-2">To request txid values (e.g. etag), the client adds a flag in the
request (e.g. with-etag).  The server then returns the txid
(e.g. etag) value in the yang-patch payload (e.g. as etag-value).<a href="#section-3.11-2" class="pilcrow">¶</a></p>
<p id="section-3.11-3">The txid value returned by the server MUST be the txid value
pertaining to the target node in the source or target datastores
that is the most recent.  If one of the datastores being
compared is not a configuration datastore, the txid in the
configuration datastore MUST be used.  If none of the datastores
being compared are a configuration datastore, then txid values
MUST NOT be returned at all.<a href="#section-3.11-3" class="pilcrow">¶</a></p>
<p id="section-3.11-4">The txid to return is the one that pertains to the target node, or
in the case of delete, the closest surviving ancestor of the target
node.<a href="#section-3.11-4" class="pilcrow">¶</a></p>
<span id="name-a-client-requests-a-nmda-da"></span><figure id="figure-14">
          <div class="alignLeft art-call-flow art-text artwork" id="section-3.11-5.1">
<pre>
     Client                                            Server
       |                                                 |
       |   ------------------------------------------&gt;   |
       |   rpc                                           |
       |     compare                                     |
       |       source ds:running                         |
       |       target ds:operational                     |
       |       with-etag true                            |
       |                                                 |
       |   &lt;------------------------------------------   |
       |   differences                                   |
       |     yang-patch                                  |
       |       patch-id 0                                |
       |       edit                                      |
       |         edit-id edit1                           |
       |         operation delete                        |
       |         target /acls/acl[A1]                    |
       |         etag-value 8008                         |
       |       edit                                      |
       |         edit-id edit2                           |
       |         operation merge                         |
       |         target /acls/acl[A2]/ace[R7]            |
       |           value                                 |
       |             matches ipv4 dscp 10                |
       |             actions forwarding accept           |
       |         etag-value 8008                         |
       |                                                 |
       v                                                 v
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-a-client-requests-a-nmda-da" class="selfRef">A client requests a NMDA Datastore compare for a given path with txid values included. When the server delivers the reply, the txid is included for each edit.</a>
          </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="txid-mechanisms">
<section id="section-4">
      <h2 id="name-txid-mechanisms">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-txid-mechanisms" class="section-name selfRef">Txid Mechanisms</a>
      </h2>
<p id="section-4-1">This document defines two txid mechanisms:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">
          <p id="section-4-2.1.1">The etag attribute txid mechanism<a href="#section-4-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.2">
          <p id="section-4-2.2.1">The last-modified attribute txid mechanism<a href="#section-4-2.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-4-3">Servers implementing this specification MUST support the etag
attribute txid mechanism and MAY support the last-modified
attribute txid mechanism.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">Section <span><a href="#netconf-txid-extension" class="internal xref">NETCONF Txid Extension</a> (<a href="#netconf-txid-extension" class="auto internal xref">Section 3</a>)</span> describes
the logic that governs all txid mechanisms.  This section describes
the mapping from the generic logic to specific mechanism and encoding.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">If a client uses more than one txid mechanism, such as both etag and
last-modified in a particular message to a server, or patricular
commit, the result is undefined.<a href="#section-4-5" class="pilcrow">¶</a></p>
<div id="the-etag-attribute-txid-mechanism">
<section id="section-4.1">
        <h3 id="name-the-etag-attribute-txid-mec">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-the-etag-attribute-txid-mec" class="section-name selfRef">The etag attribute txid mechanism</a>
        </h3>
<p id="section-4.1-1">The etag txid mechanism described in this section is centered around
a meta data XML attribute called "etag".  The etag attribute is
defined in the namespace "urn:ietf:params:xml:ns:netconf:txid:1.0".
The etag attribute is added to XML elements in the NETCONF payload
in order to indicate the txid value for the YANG node represented by
the element.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">NETCONF servers that support this extension MUST announce the
capability "urn:ietf:params:netconf:capability:txid:etag:1.0".<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">The etag attribute values are opaque strings chosen freely.  They MUST
consist of ASCII printable characters (VCHAR), except that the etag
string MUST NOT contain space, backslash or double quotes. The point of
these restrictions is to make it easy to reuse implementations that
adhere to section 2.3.1 in <span>[<a href="#RFC7232" class="cite xref">RFC7232</a>]</span>.  The probability
SHOULD be made very low that an etag value that has been used
historically by a server is used again by that server if the
configuration is different.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">It is RECOMMENDED that the same etag txid values are used across all
management interfaces (i.e. NETCONF, RESTCONF and any other the server
might implement), if it implements more than one.  It is RECOMMENDED
that the etag txid has an encoding specific suffix, especially when it
is not encoded in XML.  E.g. a response encoded in JSON might append
"+json" at the end of the etag value. This is in line with the language
in <span>[<a href="#RFC7232" class="cite xref">RFC7232</a>]</span> and traditions in the HTTP world at large.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">The detailed rules for when to update the etag value are described in
section <span><a href="#general-txid-principles" class="internal xref">General Txid Principles</a> (<a href="#general-txid-principles" class="auto internal xref">Section 3.2</a>)</span>.  These
rules are chosen to be consistent with the ETag mechanism in
RESTCONF, <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>,
specifically sections 3.4.1.2, 3.4.1.3 and 3.5.2.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-last-modified-attribute-txid-mechanism">
<section id="section-4.2">
        <h3 id="name-the-last-modified-attribute">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-the-last-modified-attribute" class="section-name selfRef">The last-modified attribute txid mechanism</a>
        </h3>
<p id="section-4.2-1">The last-modified txid mechanism described in this section is
centered around a meta data XML attribute called "last-modified".
The last-modified attribute is defined in the namespace
"urn:ietf:params:xml:ns:netconf:txid:1.0".  The last-modified
attribute is added to XML elements in the NETCONF payload in
order to indicate the txid value for the YANG node represented by
the element.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">NETCONF servers that support this extension MUST announce the
feature last-modified defined in ietf-netconf-txid.yang.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">The last-modified attribute values are yang:date-and-time values as
defined in ietf-yang-types.yang, <span>[<a href="#RFC6991" class="cite xref">RFC6991</a>]</span>.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">"2022-04-01T12:34:56.123456Z" is an example of what this time stamp
format looks like.  It is RECOMMENDED that the time stamps provided
by the server closely match the real world clock.  Servers
MUST ensure the timestamps provided are monotonously increasing for
as long as the server's operation is maintained.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">It is RECOMMENDED that server implementors choose the number of
digits of precision used for the fractional second timestamps
high enough so that there is no risk that multiple transactions on
the server would get the same timestamp.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">It is RECOMMENDED that the same last-modified txid values are used
across all management interfaces (i.e. NETCONF and any other the
server might implement), except RESTCONF.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2-7">RESTCONF, as defined in
<span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>,
is using a different format for the time stamps which is
limited to one second resolution.  Server implementors that support
the Last-Modified txid mechanism over both RESTCONF and other
management protocols are RECOMMENDED to use Last-Modified timestamps
that match the point in time referenced over RESTCONF, with the
fractional seconds part added.<a href="#section-4.2-7" class="pilcrow">¶</a></p>
<p id="section-4.2-8">The detailed rules for when to update the last-modified value are
described in section
<span><a href="#general-txid-principles" class="internal xref">General Txid Principles</a> (<a href="#general-txid-principles" class="auto internal xref">Section 3.2</a>)</span>.  These rules
are chosen to be consistent with the Last-Modified mechanism in
RESTCONF, <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>,
specifically sections 3.4.1.1, 3.4.1.3 and 3.5.1.<a href="#section-4.2-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="common-features-to-both-etag-and-last-modified-txid-mechanisms">
<section id="section-4.3">
        <h3 id="name-common-features-to-both-eta">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-common-features-to-both-eta" class="section-name selfRef">Common features to both etag and last-modified txid mechanisms</a>
        </h3>
<p id="section-4.3-1">Clients MAY add etag or last-modified attributes to zero or
more individual elements in the get-config or get-data filter, in
which case they pertain to the subtree(s) rooted at the element(s)
with the attributes.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">Clients MAY also add such attributes directly to the get-config or
get-data tags (e.g. if there is no filter), in which case it
pertains to the txid value of the datastore root.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">Clients might wish to send a txid value that is guaranteed to never
match a server constructed txid.  With both the etag and
last-modified txid mechanisms, such a txid-request value is "?".<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">Clients MAY add etag or last-modified attributes to the payload
of edit-config or edit-data requests, in which case they indicate
the client's txid value of that element.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">Clients MAY request servers that also implement YANG-Push to return
configuration change subsription updates with etag or
last-modified txid attributes.  The client requests this service by
adding a with-etag or with-last-modified flag with the value 'true'
to the subscription request or yang-push configuration.  The server
MUST then return such txids on the YANG Patch edit tag and to the
child elements of the value tag.  The txid attribute on the edit tag
reflects the txid associated with the changes encoded in this edit
section, as well as parent nodes.  Later edit sections in the same
push-update or push-change-update may still supercede the txid value
for some or all of the nodes in the current edit section.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
<p id="section-4.3-6">Servers returning txid values in get-config, edit-config, get-data,
edit-data and commit operations MUST do so by adding etag and/or
last-modified txid attributes to the data and ok tags.  When
servers prune output due to a matching txid value, the server
MUST add a txid-match attribute to the pruned element, and MUST set
the attribute value to "=", and MUST NOT send any element value.<a href="#section-4.3-6" class="pilcrow">¶</a></p>
<p id="section-4.3-7">Servers returning a txid mismatch error MUST return an rpc-error
as defined in section
<span><a href="#conditional-transactions" class="internal xref">Conditional Transactions</a> (<a href="#conditional-transactions" class="auto internal xref">Section 3.6</a>)</span> with an
error-info tag containing a txid-value-mismatch-error-info
structure.<a href="#section-4.3-7" class="pilcrow">¶</a></p>
<div id="candidate-datastore">
<section id="section-4.3.1">
          <h4 id="name-candidate-datastore">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-candidate-datastore" class="section-name selfRef">Candidate Datastore</a>
          </h4>
<p id="section-4.3.1-1">When servers return txid values in get-config and get-data operations
towards the candidate datastore, the txid values returned MUST adhere
to the following rules:<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-2.1">
              <p id="section-4.3.1-2.1.1">If the versioned node holds the same data as in the running
datastore, the same txid value as the versioned node in running
MUST be used.<a href="#section-4.3.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.1-2.2">
              <p id="section-4.3.1-2.2.1">If the versioned node is different in the candidate store
than in the running datastore, the server has a choice of what
to return. The server MAY return the special "txid-unknown" value "!".
If the txid-unknown value is not returned, the server MUST return
the txid value the versioned node will have if the client decides to
commit the candidate datastore without further updates.<a href="#section-4.3.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="namespaces-and-attribute-placement">
<section id="section-4.3.2">
          <h4 id="name-namespaces-and-attribute-pl">
<a href="#section-4.3.2" class="section-number selfRef">4.3.2. </a><a href="#name-namespaces-and-attribute-pl" class="section-name selfRef">Namespaces and Attribute Placement</a>
          </h4>
<p id="section-4.3.2-1">The txid attributes are valid on the following NETCONF tags,
where xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0" <span>[<a href="#RFC4741" class="cite xref">RFC4741</a>]</span> <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>,
xmlns:ncds="urn:ietf:params:xml:ns:yang:ietf-netconf-nmda" <span>[<a href="#RFC8526" class="cite xref">RFC8526</a>]</span>,
xmlns:sn="urn:ietf:params:xml:ns:yang:ietf-subscribed-notifications" <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span>,
xmlns:yp="urn:ietf:params:xml:ns:yang:ietf-yang-push" <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span> and
xmlns:ypatch="urn:ietf:params:xml:ns:yang:ietf-yang-patch" <span>[<a href="#RFC8072" class="cite xref">RFC8072</a>]</span>:<a href="#section-4.3.2-1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-2">In client messages sent to a server:<a href="#section-4.3.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.2-3.1">
              <p id="section-4.3.2-3.1.1">/nc:rpc/nc:get-config<a href="#section-4.3.2-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.2">
              <p id="section-4.3.2-3.2.1">/nc:rpc/nc:get-config/nc:filter//*<a href="#section-4.3.2-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.3">
              <p id="section-4.3.2-3.3.1">/nc:rpc/ncds:get-data<a href="#section-4.3.2-3.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.4">
              <p id="section-4.3.2-3.4.1">/nc:rpc/ncds:get-data/ncds:subtree-filter//*<a href="#section-4.3.2-3.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.5">
              <p id="section-4.3.2-3.5.1">/nc:rpc/ncds:get-data/ncds:xpath-filter//*<a href="#section-4.3.2-3.5.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.6">
              <p id="section-4.3.2-3.6.1">/nc:rpc/nc:edit-config/nc:config<a href="#section-4.3.2-3.6.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.7">
              <p id="section-4.3.2-3.7.1">/nc:rpc/nc:edit-config/nc:config//*<a href="#section-4.3.2-3.7.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.8">
              <p id="section-4.3.2-3.8.1">/nc:rpc/ncds:edit-data/ncds:config<a href="#section-4.3.2-3.8.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-3.9">
              <p id="section-4.3.2-3.9.1">/nc:rpc/ncds:edit-data/ncds:config//*<a href="#section-4.3.2-3.9.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-4.3.2-4">In server messages sent to a client:<a href="#section-4.3.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.2-5.1">
              <p id="section-4.3.2-5.1.1">/nc:rpc-reply/nc:data<a href="#section-4.3.2-5.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.2">
              <p id="section-4.3.2-5.2.1">/nc:rpc-reply/nc:data//*<a href="#section-4.3.2-5.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.3">
              <p id="section-4.3.2-5.3.1">/nc:rpc-reply/ncds:data<a href="#section-4.3.2-5.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.4">
              <p id="section-4.3.2-5.4.1">/nc:rpc-reply/ncds:data//*<a href="#section-4.3.2-5.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.5">
              <p id="section-4.3.2-5.5.1">/nc:rpc-reply/nc:ok<a href="#section-4.3.2-5.5.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.6">
              <p id="section-4.3.2-5.6.1">/yp:push-update/yp:datastore-contents/ypatch:yang-patch/
ypatch:edit<a href="#section-4.3.2-5.6.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.7">
              <p id="section-4.3.2-5.7.1">/yp:push-update/yp:datastore-contents/ypatch:yang-patch/
ypatch:edit/ypatch:value//*<a href="#section-4.3.2-5.7.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.8">
              <p id="section-4.3.2-5.8.1">/yp:push-change-update/yp:datastore-contents/ypatch:yang-patch/
ypatch:edit<a href="#section-4.3.2-5.8.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4.3.2-5.9">
              <p id="section-4.3.2-5.9.1">/yp:push-change-update/yp:datastore-contents/ypatch:yang-patch/
ypatch:edit/ypatch:value//*<a href="#section-4.3.2-5.9.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="txid-mechanism-examples">
<section id="section-5">
      <h2 id="name-txid-mechanism-examples">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-txid-mechanism-examples" class="section-name selfRef">Txid Mechanism Examples</a>
      </h2>
<div id="initial-configuration-response">
<section id="section-5.1">
        <h3 id="name-initial-configuration-respo">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-initial-configuration-respo" class="section-name selfRef">Initial Configuration Response</a>
        </h3>
<div id="with-etag">
<section id="section-5.1.1">
          <h4 id="name-with-etag">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-with-etag" class="section-name selfRef">With etag</a>
          </h4>
<p id="section-5.1.1-1">NOTE: In the etag examples below, we have chosen to use a txid
value consisting of "nc" followed by a monotonously increasing
integer.  This is convenient for the reader trying to make sense
of the examples, but is not an implementation requirement.  An
etag would often be implemented as a "random" string of characters.<a href="#section-5.1.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-2">To retrieve etag attributes across the entire NETCONF server
configuration, a client might send:<a href="#section-5.1.1-2" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.1.1-3">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="1"
     xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;get-config txid:etag="?"/&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.1.1-3" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-4">The server's reply might then be:<a href="#section-5.1.1-4" class="pilcrow">¶</a></p>
<div class="breakable lang-xml sourcecode" id="section-5.1.1-5">
<pre>
&lt;rpc-reply message-id="1"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data txid:etag="nc5152"&gt;
    &lt;acls xmlns=
            "urn:ietf:params:xml:ns:yang:ietf-access-control-list"
          txid:etag="nc5152"&gt;
      &lt;acl txid:etag="nc4711"&gt;
        &lt;name&gt;A1&lt;/name&gt;
        &lt;aces txid:etag="nc4711"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R1&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;protocol&gt;17&lt;/protocol&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
      &lt;acl txid:etag="nc5152"&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces txid:etag="nc5152"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;10&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc5152"&gt;
            &lt;name&gt;R8&lt;/name&gt;
            &lt;matches&gt;
              &lt;udp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/udp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc5152"&gt;
            &lt;name&gt;R9&lt;/name&gt;
            &lt;matches&gt;
              &lt;tcp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/tcp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
    &lt;nacm xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-acm"
          txid:etag="nc3072"&gt;
      &lt;groups txid:etag="nc3072"&gt;
        &lt;group txid:etag="nc3072"&gt;
          &lt;name&gt;admin&lt;/name&gt;
          &lt;user-name&gt;sakura&lt;/user-name&gt;
          &lt;user-name&gt;joe&lt;/user-name&gt;
        &lt;/group&gt;
      &lt;/groups&gt;
    &lt;/nacm&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.1.1-5" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-6">To retrieve etag attributes for a specific ACL using an xpath
filter, a client might send:<a href="#section-5.1.1-6" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.1.1-7">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="2"
     xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;get-config&gt;
    &lt;source&gt;
      &lt;running/&gt;
    &lt;/source&gt;
    &lt;filter type="xpath"
      xmlns:acl=
        "urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      select="/acl:acls/acl:acl[acl:name='A1']"
      txid:etag="?"/&gt;
  &lt;/get-config&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.1.1-7" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-8">To retrieve etag attributes for "acls", but not for "nacm",
a client might send:<a href="#section-5.1.1-8" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.1.1-9">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="3"
     xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;get-config&gt;
    &lt;source&gt;
      &lt;running/&gt;
    &lt;/source&gt;
    &lt;filter&gt;
      &lt;acls
        xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
        txid:etag="?"/&gt;
      &lt;nacm xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-acm"/&gt;
    &lt;/filter&gt;
  &lt;/get-config&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.1.1-9" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-10">If the server considers "acls", "acl", "aces" and "acl" to be
Versioned Nodes, the server's response to the request above
might look like:<a href="#section-5.1.1-10" class="pilcrow">¶</a></p>
<div class="breakable lang-xml sourcecode" id="section-5.1.1-11">
<pre>
&lt;rpc-reply message-id="3"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls xmlns=
            "urn:ietf:params:xml:ns:yang:ietf-access-control-list"
          txid:etag="nc5152"&gt;
      &lt;acl txid:etag="nc4711"&gt;
        &lt;name&gt;A1&lt;/name&gt;
        &lt;aces txid:etag="nc4711"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R1&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;protocol&gt;17&lt;/protocol&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
      &lt;acl txid:etag="nc5152"&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces txid:etag="nc5152"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;10&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc5152"&gt;
            &lt;name&gt;R8&lt;/name&gt;
            &lt;matches&gt;
              &lt;udp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/udp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc5152"&gt;
            &lt;name&gt;R9&lt;/name&gt;
            &lt;matches&gt;
              &lt;tcp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/tcp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
    &lt;nacm xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-acm"/&gt;
      &lt;groups&gt;
        &lt;group&gt;
          &lt;name&gt;admin&lt;/name&gt;
          &lt;user-name&gt;sakura&lt;/user-name&gt;
          &lt;user-name&gt;joe&lt;/user-name&gt;
        &lt;/group&gt;
      &lt;/groups&gt;
    &lt;/nacm&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.1.1-11" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="with-last-modified">
<section id="section-5.1.2">
          <h4 id="name-with-last-modified">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-with-last-modified" class="section-name selfRef">With last-modified</a>
          </h4>
<p id="section-5.1.2-1">To retrieve last-modified attributes for "acls", but not for "nacm",
a client might send:<a href="#section-5.1.2-1" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.1.2-2">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="4"
     xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;get-config&gt;
    &lt;source&gt;
      &lt;running/&gt;
    &lt;/source&gt;
    &lt;filter&gt;
      &lt;acls
        xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
        txid:last-modified="?"/&gt;
      &lt;nacm xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-acm"/&gt;
    &lt;/filter&gt;
  &lt;/get-config&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1.2-3">If the server considers "acls", "acl", "aces" and "acl" to be
Versioned Nodes, the server's response to the request above
might look like:<a href="#section-5.1.2-3" class="pilcrow">¶</a></p>
<div class="breakable lang-xml sourcecode" id="section-5.1.2-4">
<pre>
&lt;rpc-reply message-id="4"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      txid:last-modified="2022-04-01T12:34:56.789012Z"&gt;
      &lt;acl txid:last-modified="2022-03-20T16:20:11.333444Z"&gt;
        &lt;name&gt;A1&lt;/name&gt;
        &lt;aces txid:last-modified="2022-03-20T16:20:11.333444Z"&gt;
          &lt;ace txid:last-modified="2022-03-20T16:20:11.333444Z"&gt;
            &lt;name&gt;R1&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;protocol&gt;17&lt;/protocol&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
      &lt;acl txid:last-modified="2022-04-01T12:34:56.789012Z"&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces txid:last-modified="2022-04-01T12:34:56.789012Z"&gt;
          &lt;ace txid:last-modified="2022-03-20T16:20:11.333444Z"&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;10&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:last-modified="2022-04-01T12:34:56.789012Z"&gt;
            &lt;name&gt;R8&lt;/name&gt;
            &lt;matches&gt;
              &lt;udp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/udp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:last-modified="2022-04-01T12:34:56.789012Z"&gt;
            &lt;name&gt;R9&lt;/name&gt;
            &lt;matches&gt;
              &lt;tcp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/tcp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
    &lt;nacm xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-acm"/&gt;
      &lt;groups&gt;
        &lt;group&gt;
          &lt;name&gt;admin&lt;/name&gt;
          &lt;user-name&gt;sakura&lt;/user-name&gt;
          &lt;user-name&gt;joe&lt;/user-name&gt;
        &lt;/group&gt;
      &lt;/groups&gt;
    &lt;/nacm&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.1.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="configuration-response-pruning">
<section id="section-5.2">
        <h3 id="name-configuration-response-prun">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-configuration-response-prun" class="section-name selfRef">Configuration Response Pruning</a>
        </h3>
<p id="section-5.2-1">A NETCONF client that already knows some txid values MAY request that
the configuration retrieval request is pruned with respect to the
client's prior knowledge.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">To retrieve only changes for "acls" that do not have the
last known etag txid value, a client might send:<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.2-3">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="6"
     xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;get-config&gt;
    &lt;source&gt;
      &lt;running/&gt;
    &lt;/source&gt;
    &lt;filter&gt;
      &lt;acls
        xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
        txid:etag="nc5152"&gt;
        &lt;acl txid:etag="nc4711"&gt;
          &lt;name&gt;A1&lt;/name&gt;
          &lt;aces txid:etag="nc4711"/&gt;
        &lt;/acl&gt;
        &lt;acl txid:etag="nc5152"&gt;
          &lt;name&gt;A2&lt;/name&gt;
          &lt;aces txid:etag="nc5152"/&gt;
        &lt;/acl&gt;
    &lt;/filter&gt;
  &lt;/get-config&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.2-3" class="pilcrow">¶</a>
</div>
<p id="section-5.2-4">Assuming the NETCONF server configuration is the same as
in the previous rpc-reply example, the server's response to request
above might look like:<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.2-5">
<pre>
&lt;rpc-reply message-id="6"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      txid:etag="="/&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.2-5" class="pilcrow">¶</a>
</div>
<p id="section-5.2-6">Or, if a configuration change has taken place under /acls since the
client was last updated, the server's response may look like:<a href="#section-5.2-6" class="pilcrow">¶</a></p>
<div class="breakable lang-xml sourcecode" id="section-5.2-7">
<pre>
&lt;rpc-reply message-id="6"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      txid:etag="nc6614"&gt;
      &lt;acl txid:etag="="&gt;
        &lt;name&gt;A1&lt;/name&gt;
      &lt;/acl&gt;
      &lt;acl txid:etag="nc6614"&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces txid:etag="nc6614"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;10&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc5152"&gt;
            &lt;name&gt;R8&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc6614"&gt;
            &lt;name&gt;R9&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;source-port&gt;
                  &lt;port&gt;830&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.2-7" class="pilcrow">¶</a>
</div>
<p id="section-5.2-8">In case the client provides a txid value for a non-versioned node,
the server needs to treat the node as having the same txid value as
the closest ancestor that does have a txid value.<a href="#section-5.2-8" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.2-9">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="7"
     xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;get-config&gt;
    &lt;source&gt;
      &lt;running/&gt;
    &lt;/source&gt;
    &lt;filter&gt;
      &lt;acls
        xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
        &lt;acl&gt;
          &lt;name&gt;A2&lt;/name&gt;
          &lt;aces&gt;
            &lt;ace&gt;
              &lt;name&gt;R7&lt;/name&gt;
              &lt;matches&gt;
                &lt;ipv4&gt;
                  &lt;dscp txid:etag="nc4711"/&gt;
                &lt;/ipv4&gt;
              &lt;/matches&gt;
            &lt;/ace&gt;
          &lt;/aces&gt;
        &lt;/acl&gt;
      &lt;/acls&gt;
    &lt;/filter&gt;
  &lt;/get-config&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.2-9" class="pilcrow">¶</a>
</div>
<p id="section-5.2-10">If a txid value is specified for a leaf, and the txid value matches
(i.e. is identical to the server's txid value, or found earlier in
the server's Txid History), the leaf value is pruned.<a href="#section-5.2-10" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.2-11">
<pre>
&lt;rpc-reply message-id="7"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
      &lt;acl&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces&gt;
          &lt;ace&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp txid:etag="="/&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
  &lt;/data&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.2-11" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="configuration-change">
<section id="section-5.3">
        <h3 id="name-configuration-change">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-configuration-change" class="section-name selfRef">Configuration Change</a>
        </h3>
<p id="section-5.3-1">A client that wishes to update the ace R1 protocol to tcp might send:<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.3-2">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="8"&gt;
  &lt;edit-config xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
               xmlns:ietf-netconf-txid=
                "urn:ietf:params:xml:ns:yang:ietf-netconf-txid"&gt;
    &lt;target&gt;
      &lt;running/&gt;
    &lt;/target&gt;
    &lt;test-option&gt;test-then-set&lt;/test-option&gt;
    &lt;ietf-netconf-txid:with-etag&gt;true&lt;/ietf-netconf-txid:with-etag&gt;
    &lt;config&gt;
      &lt;acls
        xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
        txid:etag="nc5152"&gt;
        &lt;acl txid:etag="nc4711"&gt;
          &lt;name&gt;A1&lt;/name&gt;
          &lt;aces txid:etag="nc4711"&gt;
            &lt;ace txid:etag="nc4711"&gt;
              &lt;matches&gt;
                &lt;ipv4&gt;
                  &lt;protocol&gt;6&lt;/protocol&gt;
                &lt;/ipv4&gt;
              &lt;/matches&gt;
              &lt;actions&gt;
                &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                  acl:accept
                &lt;forwarding&gt;
              &lt;/actions&gt;
            &lt;/ace&gt;
          &lt;/aces&gt;
        &lt;/acl&gt;
      &lt;/acls&gt;
    &lt;/config&gt;
  &lt;/edit-config&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.3-2" class="pilcrow">¶</a>
</div>
<p id="section-5.3-3">The server would update the protocol leaf in the running datastore,
and return an rpc-reply as follows:<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.3-4">
<pre>
&lt;rpc-reply message-id="8"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;ok txid:etag="nc7688"/&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.3-4" class="pilcrow">¶</a>
</div>
<p id="section-5.3-5">A subsequent get-config request for "acls", with txid:etag="?" might
then return:<a href="#section-5.3-5" class="pilcrow">¶</a></p>
<div class="breakable lang-xml sourcecode" id="section-5.3-6">
<pre>
&lt;rpc-reply message-id="9"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      txid:etag="nc7688"&gt;
      &lt;acl txid:etag="nc7688"&gt;
        &lt;name&gt;A1&lt;/name&gt;
        &lt;aces txid:etag="nc7688"&gt;
          &lt;ace txid:etag="nc7688"&gt;
            &lt;name&gt;R1&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;protocol&gt;6&lt;/protocol&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
      &lt;acl txid:etag="nc6614"&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces txid:etag="nc6614"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;10&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc5152"&gt;
            &lt;name&gt;R8&lt;/name&gt;
            &lt;matches&gt;
              &lt;udp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;22&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/udp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc6614"&gt;
            &lt;name&gt;R9&lt;/name&gt;
            &lt;matches&gt;
              &lt;tcp&gt;
                &lt;source-port&gt;
                  &lt;port&gt;830&lt;/port&gt;
                &lt;/source-port&gt;
              &lt;/tcp&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.3-6" class="pilcrow">¶</a>
</div>
<p id="section-5.3-7">In case the server at this point received a configuration change from
another source, such as a CLI operator, removing ace R8 and R9 in
acl A2, a subsequent get-config request for acls, with txid:etag="?"
might then return:<a href="#section-5.3-7" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.3-8">
<pre>
&lt;rpc-reply message-id="9"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      txid:etag="cli2222"&gt;
      &lt;acl txid:etag="nc7688"&gt;
        &lt;name&gt;A1&lt;/name&gt;
        &lt;aces txid:etag="nc7688"&gt;
          &lt;ace txid:etag="nc7688"&gt;
            &lt;name&gt;R1&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;protocol&gt;6&lt;/protocol&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
      &lt;acl txid:etag="cli2222"&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces txid:etag="cli2222"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;10&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.3-8" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="conditional-configuration-change">
<section id="section-5.4">
        <h3 id="name-conditional-configuration-c">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-conditional-configuration-c" class="section-name selfRef">Conditional Configuration Change</a>
        </h3>
<p id="section-5.4-1">If a client wishes to delete acl A1 if and only if its configuration
has not been altered since this client last synchronized its
configuration with the server, at which point it received the etag
"nc7688" for acl A1, regardless of any possible changes to other
acls, it might send:<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.4-2">
<pre>
&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0" message-id="10"
     xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
     xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"
     xmlns:ietf-netconf-txid=
       "urn:ietf:params:xml:ns:yang:ietf-netconf-txid"&gt;
  &lt;edit-config&gt;
    &lt;target&gt;
      &lt;running/&gt;
    &lt;/target&gt;
    &lt;test-option&gt;test-then-set&lt;/test-option&gt;
    &lt;ietf-netconf-txid:with-etag&gt;true&lt;/ietf-netconf-txid:with-etag&gt;
    &lt;config&gt;
      &lt;acls xmlns=
          "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
        &lt;acl nc:operation="delete"
             txid:etag="nc7688"&gt;
          &lt;name&gt;A1&lt;/name&gt;
        &lt;/acl&gt;
      &lt;/acls&gt;
    &lt;/config&gt;
  &lt;/edit-config&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.4-2" class="pilcrow">¶</a>
</div>
<p id="section-5.4-3">If acl A1 now has the etag txid value "nc7688", as expected by the
client, the transaction goes through, and the server responds
something like:<a href="#section-5.4-3" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.4-4">
<pre>
&lt;rpc-reply message-id="10"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;ok txid:etag="nc8008"/&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.4-4" class="pilcrow">¶</a>
</div>
<p id="section-5.4-5">A subsequent get-config request for acls, with txid:etag="?" might
then return:<a href="#section-5.4-5" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.4-6">
<pre>
&lt;rpc-reply message-id="11"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      txid:etag="nc8008"&gt;
      &lt;acl txid:etag="cli2222"&gt;
        &lt;name&gt;A2&lt;/name&gt;
        &lt;aces txid:etag="cli2222"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R7&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;10&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
  &lt;/data&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.4-6" class="pilcrow">¶</a>
</div>
<p id="section-5.4-7">In case acl A1 did not have the expected etag txid value "nc7688"
when the server processed this request, nor was the client's txid
value found later in the server's Txid History, then the server
rejects the transaction, and might send:<a href="#section-5.4-7" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.4-8">
<pre>
&lt;rpc-reply xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:acl=
            "urn:ietf:params:xml:ns:yang:ietf-access-control-list"
           xmlns:ietf-netconf-txid=
             "urn:ietf:params:xml:ns:yang:ietf-netconf-txid"
           message-id="11"&gt;
  &lt;rpc-error&gt;
    &lt;error-type&gt;protocol&lt;/error-type&gt;
    &lt;error-tag&gt;operation-failed&lt;/error-tag&gt;
    &lt;error-severity&gt;error&lt;/error-severity&gt;
    &lt;error-info&gt;
      &lt;ietf-netconf-txid:txid-value-mismatch-error-info&gt;
        &lt;ietf-netconf-txid:mismatch-path&gt;
          /acl:acls/acl:acl[acl:name="A1"]
        &lt;/ietf-netconf-txid:mismatch-path&gt;
        &lt;ietf-netconf-txid:mismatch-etag-value&gt;
          cli6912
        &lt;/ietf-netconf-txid:mismatch-etag-value&gt;
      &lt;/ietf-netconf-txid:txid-value-mismatch-error-info&gt;
    &lt;/error-info&gt;
  &lt;/rpc-error&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.4-8" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="reading-from-the-candidate-datastore">
<section id="section-5.5">
        <h3 id="name-reading-from-the-candidate-">
<a href="#section-5.5" class="section-number selfRef">5.5. </a><a href="#name-reading-from-the-candidate-" class="section-name selfRef">Reading from the Candidate Datastore</a>
        </h3>
<p id="section-5.5-1">Let's assume that a get-config towards the running datastore
currently contains the following data and txid values:<a href="#section-5.5-1" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.5-2">
<pre>
&lt;rpc-reply message-id="12"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"
      txid:etag="nc4711"&gt;
      &lt;acl txid:etag="nc4711"&gt;
        &lt;name&gt;A1&lt;/name&gt;
        &lt;aces txid:etag="nc4711"&gt;
          &lt;ace txid:etag="nc4711"&gt;
            &lt;name&gt;R1&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;protocol&gt;17&lt;/protocol&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc2219"&gt;
            &lt;name&gt;R2&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;21&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
  &lt;/data&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.5-2" class="pilcrow">¶</a>
</div>
<p id="section-5.5-3">A client issues discard-changes (to make the candidate datastore
equal to the running datastore), and issues an edit-config to
change the R1 protocol from udp (17) to tcp (6), and then executes a
get-config with the txid-request attribute "?" set on the acl A1,
the server might respond:<a href="#section-5.5-3" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.5-4">
<pre>
&lt;rpc-reply message-id="13"
           xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
           xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;data&gt;
    &lt;acls
      xmlns="urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
      &lt;acl txid:etag="!"&gt;
        &lt;name&gt;A1&lt;/name&gt;
        &lt;aces txid:etag="!"&gt;
          &lt;ace txid:etag="!"&gt;
            &lt;name&gt;R1&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;protocol&gt;6&lt;/protocol&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
          &lt;ace txid:etag="nc2219"&gt;
            &lt;name&gt;R2&lt;/name&gt;
            &lt;matches&gt;
              &lt;ipv4&gt;
                &lt;dscp&gt;21&lt;/dscp&gt;
              &lt;/ipv4&gt;
            &lt;/matches&gt;
            &lt;actions&gt;
              &lt;forwarding xmlns:acl=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
                acl:accept
              &lt;forwarding&gt;
            &lt;/actions&gt;
          &lt;/ace&gt;
        &lt;/aces&gt;
      &lt;/acl&gt;
    &lt;/acls&gt;
  &lt;/data&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.5-4" class="pilcrow">¶</a>
</div>
<p id="section-5.5-5">Here, the txid-unknown value "!" is sent by the server.  This
particular server implementation does not know beforehand which
txid value would be used for this versioned node after commit.
It will be a value different from the current corresponding
txid value in the running datastore.<a href="#section-5.5-5" class="pilcrow">¶</a></p>
<p id="section-5.5-6">In case the server is able to predict the txid value that would
be used for the versioned node after commit, it could respond
with that value instead.  Let's say the server knows the txid
would be "7688" if the candidate datastore was committed without
further changes, then it would respond with that value in each
place where the example shows "!" above.<a href="#section-5.5-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="commit">
<section id="section-5.6">
        <h3 id="name-commit">
<a href="#section-5.6" class="section-number selfRef">5.6. </a><a href="#name-commit" class="section-name selfRef">Commit</a>
        </h3>
<p id="section-5.6-1">The client MAY request that the new etag txid value is returned as an
attribute on the ok response for a successful commit.  The client
requests this by adding with-etag to the commit operation.<a href="#section-5.6-1" class="pilcrow">¶</a></p>
<p id="section-5.6-2">For example, a client might send:<a href="#section-5.6-2" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.6-3">
<pre>
&lt;rpc message-id="14"
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    xmlns:ietf-netconf-txid=
      "urn:ietf:params:xml:ns:yang:ietf-netconf-txid"
  &lt;commit&gt;
    &lt;ietf-netconf-txid:with-etag&gt;true&lt;/ietf-netconf-txid:with-etag&gt;
  &lt;/commit&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.6-3" class="pilcrow">¶</a>
</div>
<p id="section-5.6-4">Assuming the server accepted the transaction, it might respond:<a href="#section-5.6-4" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.6-5">
<pre>
&lt;rpc-reply message-id="14"
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
    xmlns:txid="urn:ietf:params:xml:ns:netconf:txid:1.0"&gt;
  &lt;ok txid:etag="nc8008"/&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.6-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="yang-push">
<section id="section-5.7">
        <h3 id="name-yang-push">
<a href="#section-5.7" class="section-number selfRef">5.7. </a><a href="#name-yang-push" class="section-name selfRef">YANG-Push</a>
        </h3>
<p id="section-5.7-1">A client MAY request that the updates for one or more YANG-Push
subscriptions are annotated with the txid values.  The request might
look like this:<a href="#section-5.7-1" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.7-2">
<pre>
&lt;netconf:rpc message-id="16"
             xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;establish-subscription
      xmlns=
        "urn:ietf:params:xml:ns:yang:ietf-subscribed-notifications"
      xmlns:yp="urn:ietf:params:xml:ns:yang:ietf-yang-push"
      xmlns:ietf-netconf-txid-yp=
        "urn:ietf:params:xml:ns:yang:ietf-txid-yang-push"&gt;
    &lt;yp:datastore
        xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores"&gt;
      ds:running
    &lt;/yp:datastore&gt;
    &lt;yp:datastore-xpath-filter
        xmlns:acl=
          "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
      /acl:acls
    &lt;/yp:datastore-xpath-filter&gt;
    &lt;yp:on-change/&gt;
    &lt;ietf-netconf-txid-yp:with-etag&gt;
      true
    &lt;/ietf-netconf-txid-yp:with-etag&gt;
  &lt;/establish-subscription&gt;
&lt;/netconf:rpc&gt;
</pre><a href="#section-5.7-2" class="pilcrow">¶</a>
</div>
<p id="section-5.7-3">A server might send a subscription update like this:<a href="#section-5.7-3" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.7-4">
<pre>
&lt;notification
  xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"
  xmlns:ietf-netconf-txid-yp=
    "urn:ietf:params:xml:ns:yang:ietf-netconf-txid-yang-push"&gt;
  &lt;eventTime&gt;2022-04-04T06:00:24.16Z&lt;/eventTime&gt;
  &lt;push-change-update
      xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-push"&gt;
    &lt;id&gt;89&lt;/id&gt;
    &lt;datastore-changes&gt;
      &lt;yang-patch&gt;
        &lt;patch-id&gt;0&lt;/patch-id&gt;
        &lt;edit&gt;
          &lt;edit-id&gt;edit1&lt;/edit-id&gt;
          &lt;operation&gt;delete&lt;/operation&gt;
          &lt;target xmlns:acl=
            "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
            /acl:acls
          &lt;/target&gt;
          &lt;value&gt;
            &lt;acl xmlns=
              "urn:ietf:params:xml:ns:yang:ietf-access-control-list"&gt;
              &lt;name&gt;A1&lt;/name&gt;
            &lt;/acl&gt;
          &lt;/value&gt;
        &lt;/edit&gt;
        &lt;ietf-netconf-txid-yp:etag-value&gt;
          nc8008
        &lt;/ietf-netconf-txid-yp:etag-value&gt;
      &lt;/yang-patch&gt;
    &lt;/datastore-changes&gt;
  &lt;/push-change-update&gt;
&lt;/notification&gt;
</pre><a href="#section-5.7-4" class="pilcrow">¶</a>
</div>
<p id="section-5.7-5">In case a client wishes to modify a previous subscription request in
order to no longer receive YANG-Push subscription updates, the request
might look like this:<a href="#section-5.7-5" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.7-6">
<pre>
&lt;rpc message-id="17"
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;modify-subscription
      xmlns=
        "urn:ietf:params:xml:ns:yang:ietf-subscribed-notifications"
      xmlns:yp="urn:ietf:params:xml:ns:yang:ietf-yang-push"
      xmlns:ietf-netconf-txid-yp=
        "urn:ietf:params:xml:ns:yang:ietf-txid-yang-push"&gt;
    &lt;id&gt;1011&lt;/id&gt;
    &lt;yp:datastore
        xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores"&gt;
      ds:running
    &lt;/yp:datastore&gt;
    &lt;ietf-netconf-txid-yp:with-etag&gt;
      false
    &lt;/ietf-netconf-txid-yp:with-etag&gt;
  &lt;/modify-subscription&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.7-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="nmda-compare">
<section id="section-5.8">
        <h3 id="name-nmda-compare">
<a href="#section-5.8" class="section-number selfRef">5.8. </a><a href="#name-nmda-compare" class="section-name selfRef">NMDA Compare</a>
        </h3>
<p id="section-5.8-1">The following example is taken from section 5 of <span>[<a href="#RFC9144" class="cite xref">RFC9144</a>]</span>.
It compares the difference between the operational and intended
datastores for a subtree under "interfaces".<a href="#section-5.8-1" class="pilcrow">¶</a></p>
<p id="section-5.8-2">In this version of the example, the client requests that txid
values, in this case etag-values, are annotated to the result.<a href="#section-5.8-2" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.8-3">
<pre>
&lt;rpc message-id="101"
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;compare xmlns="urn:ietf:params:xml:ns:yang:ietf-nmda-compare"
      xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores"
      xmlns:ietf-netconf-txid-nmda-compare=
        "urn:ietf:params:xml:ns:yang:ietf-netconf-txid-nmda-compare"&gt;
    &lt;source&gt;ds:operational&lt;/source&gt;
    &lt;target&gt;ds:intended&lt;/target&gt;
    &lt;report-origin/&gt;
    &lt;ietf-netconf-txid-nmda-compare:with-etag&gt;
      true
    &lt;/ietf-netconf-txid-nmda-compare:with-etag&gt;
    &lt;xpath-filter
        xmlns:if="urn:ietf:params:xml:ns:yang:ietf-interfaces"&gt;
      /if:interfaces
    &lt;/xpath-filter&gt;
  &lt;/compare&gt;
&lt;/rpc&gt;
</pre><a href="#section-5.8-3" class="pilcrow">¶</a>
</div>
<p id="section-5.8-4">RPC reply when a difference is detected:<a href="#section-5.8-4" class="pilcrow">¶</a></p>
<div class="lang-xml sourcecode" id="section-5.8-5">
<pre>
&lt;rpc-reply
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
    message-id="101"&gt;
  &lt;differences
    xmlns="urn:ietf:params:xml:ns:yang:ietf-nmda-compare"
    xmlns:or="urn:ietf:params:xml:ns:yang:ietf-origin"
    xmlns:ietf-netconf-txid-nmda-compare=
      "urn:ietf:params:xml:ns:yang:ietf-netconf-txid-nmda-compare"&gt;
    &lt;yang-patch&gt;
      &lt;patch-id&gt;interface status&lt;/patch-id&gt;
      &lt;comment&gt;
        diff between operational (source) and intended (target),
        with txid values taken from intended.
      &lt;/comment&gt;
      &lt;edit&gt;
        &lt;edit-id&gt;1&lt;/edit-id&gt;
        &lt;operation&gt;replace&lt;/operation&gt;
        &lt;target&gt;/ietf-interfaces:interface=eth0/enabled&lt;/target&gt;
        &lt;value&gt;
          &lt;if:enabled&gt;false&lt;/if:enabled&gt;
        &lt;/value&gt;
        &lt;source-value&gt;
          &lt;if:enabled or:origin="or:learned"&gt;true&lt;/if:enabled&gt;
        &lt;/source-value&gt;
        &lt;ietf-netconf-txid-nmda-compare:etag-value&gt;
          4004
        &lt;/ietf-netconf-txid-nmda-compare:etag-value&gt;
      &lt;/edit&gt;
      &lt;edit&gt;
        &lt;edit-id&gt;2&lt;/edit-id&gt;
        &lt;operation&gt;create&lt;/operation&gt;
        &lt;target&gt;/ietf-interfaces:interface=eth0/description&lt;/target&gt;
        &lt;value&gt;
          &lt;if:description&gt;ip interface&lt;/if:description&gt;
        &lt;/value&gt;
        &lt;ietf-netconf-txid-nmda-compare:etag-value&gt;
          8008
        &lt;/ietf-netconf-txid-nmda-compare:etag-value&gt;
      &lt;/edit&gt;
    &lt;/yang-patch&gt;
  &lt;/differences&gt;
&lt;/rpc-reply&gt;
</pre><a href="#section-5.8-5" class="pilcrow">¶</a>
</div>
<p id="section-5.8-6">The same response in RESTCONF (using JSON format):<a href="#section-5.8-6" class="pilcrow">¶</a></p>
<div class="lang-http sourcecode" id="section-5.8-7">
<pre>
HTTP/1.1 200 OK
Date: Thu, 24 Jan 2019 20:56:30 GMT
Server: example-server
Content-Type: application/yang-data+json

{ "ietf-nmda-compare:output" : {
    "differences" : {
      "ietf-yang-patch:yang-patch" : {
        "patch-id" : "interface status",
        "comment" : "diff between intended (source) and operational",
        "edit" : [
          {
            "edit-id" : "1",
            "operation" : "replace",
            "target" : "/ietf-interfaces:interface=eth0/enabled",
            "value" : {
              "ietf-interfaces:interface/enabled" : "false"
            },
            "source-value" : {
              "ietf-interfaces:interface/enabled" : "true",
              "@ietf-interfaces:interface/enabled" : {
                "ietf-origin:origin" : "ietf-origin:learned"
              }
            },
            "ietf-netconf-txid-nmda-compare:etag-value": "4004"
          },
          {
            "edit-id" : "2",
            "operation" : "create",
            "target" : "/ietf-interfaces:interface=eth0/description",
            "value" : {
              "ietf-interface:interface/description" : "ip interface"
            },
            "ietf-netconf-txid-nmda-compare:etag-value": "8008"
          }
        ]
      }
    }
  }
}
</pre><a href="#section-5.8-7" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="yang-modules">
<section id="section-6">
      <h2 id="name-yang-modules">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-yang-modules" class="section-name selfRef">YANG Modules</a>
      </h2>
<div id="base-module-for-txid-in-netconf">
<section id="section-6.1">
        <h3 id="name-base-module-for-txid-in-net">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-base-module-for-txid-in-net" class="section-name selfRef">Base module for txid in NETCONF</a>
        </h3>
<div class="breakable lang-yang sourcecode" id="section-6.1-1">
<pre>&lt;CODE BEGINS&gt; file "ietf-netconf-txid@2023-03-01.yang"

module ietf-netconf-txid {
  yang-version 1.1;
  namespace
    'urn:ietf:params:xml:ns:yang:ietf-netconf-txid';
  prefix ietf-netconf-txid;

  import ietf-netconf {
    prefix nc;
  }

  import ietf-netconf-nmda {
    prefix ncds;
  }

  import ietf-yang-structure-ext {
    prefix sx;
  }

  import ietf-yang-types {
    prefix yang;
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";

  contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netconf/&gt;
     WG List:  &lt;netconf@ietf.org&gt;

     Author:   Jan Lindblad
               &lt;mailto:jlindbla@cisco.com&gt;";

  description
    "NETCONF Transaction ID aware operations for NMDA.

     Copyright (c) 2022 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.
     ";

  revision 2023-03-01 {
    description
      "Initial revision";
    reference
      "RFC XXXX: Xxxxxxxxx";
  }

  feature last-modified {
    description "Servers implementing this module MUST support the
      etag txid mechanism.  Servers MAY also support the
      last-modified txid mechanism.  Support is shown by announcing
      this feature.";
  }

  extension versioned-node {
    description "This statement is used by servers to declare that a
      the server is maintaining a Txid for the YANG node with this
      statement.  Which YANG nodes are versioned nodes may be useful
      information for clients (especially during development).

      Servers are not required to use this statement to declare
      which nodes are versioned nodes.

      Example of use:

      container interfaces {
        ietf-netconf-txid:versioned-node;
        ...
      }
      ";
  }

  typedef etag-t {
    type string {
      pattern ".* .*" {
        modifier invert-match;
      }
      pattern '.*".*' {
        modifier invert-match;
      }
      pattern ".*\\.*" {
        modifier invert-match;
      }
    }
    description
      "Unique Entity-tag txid value representing a specific
      transaction.  Could be any string that does not contain
      spaces, double quotes or backslash.  The txid values '?',
      '!' and '=' have special meaning.";
  }

  typedef last-modified-t {
    type union {
      type yang:date-and-time;
      type enumeration {
        enum ? {
          description "Txid value used by clients that is
            guaranteed not to match any txid on the server.";
        }
        enum ! {
          description "Txid value used by servers to indicate
            the node in the candidate datastore has changed
            relative the running datastore, but not yet received
            a new txid value on the server.";
        }
        enum = {
          description "Txid value used by servers to indicate
            that contents has been pruned due to txid match
            between client and server.";
        }
      }
    }
    description
      "Last-modified txid value representing a specific transaction.
       The txid values '?', '!' and '=' have special meaning.";
  }

  grouping txid-grouping {
    leaf with-etag {
      type boolean;
      description
        "Indicates whether the client requests the server to include
         a txid:etag txid attribute when the configuration has
         changed.";
    }
    leaf with-last-modified {
      if-feature last-modified;
      type boolean;
      description
        "Indicates whether the client requests the server to include
         a txid:last-modified attribute when the configuration has
         changed.";
    }
    description
      "Grouping for txid mechanisms, to be augmented into
       rpcs that modify configuration data stores.";
  }

  grouping txid-value-grouping {
    leaf etag-value {
      type etag-t;
      description
        "Indicates server's txid value for a YANG node.";
    }
    leaf last-modified-value {
      if-feature last-modified;
      type last-modified-t;
      description
        "Indicates server's txid value for a YANG node.";
    }
    description
      "Grouping for txid mechanisms, to be augmented into
       output of rpcs that return txid metadata for configuration
       data stores.";
  }

  augment /nc:edit-config/nc:input {
    uses txid-grouping;
    description
      "Injects the txid mechanisms into the
      edit-config operation";
  }

  augment /nc:commit/nc:input {
    uses txid-grouping;
    description
      "Injects the txid mechanisms into the
      commit operation";
  }

  augment /ncds:edit-data/ncds:input {
    uses txid-grouping;
    description
      "Injects the txid mechanisms into the
      edit-data operation";
  }

  sx:structure txid-value-mismatch-error-info {
    container txid-value-mismatch-error-info {
      description
         "This error is returned by a NETCONF server when a client
          sends a configuration change request, with the additonal
          condition that the server aborts the transaction if the
          server's configuration has changed from what the client
          expects, and the configuration is found not to actually
          not match the client's expectation.";
      leaf mismatch-path {
        type instance-identifier;
        description
          "Indicates the YANG path to the element with a mismatching
           etag txid value.";
      }
      leaf mismatch-etag-value {
        type etag-t;
        description
          "Indicates server's txid value of the etag
          attribute for one mismatching element.";
      }
      leaf mismatch-last-modified-value {
        if-feature last-modified;
        type last-modified-t;
        description
          "Indicates server's txid value of the last-modified
          attribute for one mismatching element.";
      }
    }
  }
}

&lt;CODE ENDS&gt;</pre><a href="#section-6.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="additional-support-for-txid-in-yang-push">
<section id="section-6.2">
        <h3 id="name-additional-support-for-txid">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-additional-support-for-txid" class="section-name selfRef">Additional support for txid in YANG-Push</a>
        </h3>
<div class="breakable lang-yang sourcecode" id="section-6.2-1">
<pre>&lt;CODE BEGINS&gt; file "ietf-netconf-txid-yang-push@2022-04-01.yang"

module ietf-netconf-txid-yang-push {
  yang-version 1.1;
  namespace
    'urn:ietf:params:xml:ns:yang:ietf-netconf-txid-yang-push';
  prefix ietf-netconf-txid-yp;

  import ietf-subscribed-notifications {
    prefix sn;
    reference
      "RFC 8639: Subscription to YANG Notifications";
  }

  import ietf-yang-push {
    prefix yp;
    reference
      "RFC 8641: Subscriptions to YANG Datastores";
  }

  import ietf-netconf-txid {
    prefix ietf-netconf-txid;
    reference
      "RFC XXXX: Xxxxxxxxx";
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";

  contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netconf/&gt;
     WG List:  &lt;netconf@ietf.org&gt;

     Author:   Jan Lindblad
               &lt;mailto:jlindbla@cisco.com&gt;";

  description
    "NETCONF Transaction ID aware operations for YANG Push.

     Copyright (c) 2022 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.
     ";

  revision 2022-04-01 {
    description
      "Initial revision";
    reference
      "RFC XXXX: Xxxxxxxxx";
  }

  augment "/sn:establish-subscription/sn:input" {
    description
      "This augmentation adds additional subscription parameters
       that apply specifically to datastore updates to RPC input.";
    uses ietf-netconf-txid:txid-grouping;
  }
  augment "/sn:modify-subscription/sn:input" {
    description
      "This augmentation adds additional subscription parameters
       specific to datastore updates.";
    uses ietf-netconf-txid:txid-grouping;
  }
  augment "/sn:subscriptions/sn:subscription" {
    description
      "This augmentation adds additional subscription parameters
       specific to datastore updates.";
    uses ietf-netconf-txid:txid-grouping;
  }
  augment "/yp:push-change-update/yp:datastore-changes/" +
          "yp:yang-patch" {
    description
      "This augmentation makes it possible for servers to return
      txid-values.";
    uses ietf-netconf-txid:txid-value-grouping;
  }
}

&lt;CODE ENDS&gt;</pre><a href="#section-6.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="additional-support-for-txid-in-nmda-compare">
<section id="section-6.3">
        <h3 id="name-additional-support-for-txid-">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-additional-support-for-txid-" class="section-name selfRef">Additional support for txid in NMDA Compare</a>
        </h3>
<div class="breakable lang-yang sourcecode" id="section-6.3-1">
<pre>&lt;CODE BEGINS&gt; file "ietf-netconf-txid-nmda-compare@2023-05-01.yang"

module ietf-netconf-txid-nmda-compare {
  yang-version 1.1;
  namespace
    'urn:ietf:params:xml:ns:yang:ietf-netconf-txid-nmda-compare';
  prefix ietf-netconf-txid-nmda-compare;

  import ietf-nmda-compare {
    prefix cmp;
    reference
      "RFC 9144: Comparison of Network Management Datastore
       Architecture (NMDA) Datastores";
  }

  import ietf-netconf-txid {
    prefix ietf-netconf-txid;
    reference
      "RFC XXXX: Xxxxxxxxx";
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";

  contact
    "WG Web:   &lt;http://tools.ietf.org/wg/netconf/&gt;
     WG List:  &lt;netconf@ietf.org&gt;

     Author:   Jan Lindblad
               &lt;mailto:jlindbla@cisco.com&gt;";

  description
    "NETCONF Transaction ID aware operations for NMDA Compare.

     Copyright (c) 2022 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.
     ";

  revision 2023-05-01 {
    description
      "Initial revision";
    reference
      "RFC XXXX: Xxxxxxxxx";
  }

  augment "/cmp:compare/cmp:input" {
    description
      "This augmentation makes it possible for clients to request
       txids to be returned.";
    uses ietf-netconf-txid:txid-grouping;
  }
  augment "/cmp:compare/cmp:output/cmp:compare-response/" +
          "cmp:differences/cmp:differences/cmp:yang-patch/cmp:edit" {
    description
      "This augmentation makes it possible for servers to return
      txid-values.";
    container most-recent {
      description "The txid value returned by the server MUST be the
        txid value pertaining to the target node in the source or
        target datastores that is the most recent.";
      uses ietf-netconf-txid:txid-value-grouping;
    }
  }
}

&lt;CODE ENDS&gt;</pre><a href="#section-6.3-1" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">The YANG modules specified in this document define YANG types, groupings, structures and additional RPC parameters for data that is designed to be accessed via network management protocols such as NETCONF <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> or RESTCONF <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>. The lowest NETCONF layer is the secure transport layer, and the mandatory-to-implement secure transport is Secure Shell (SSH) <span>[<a href="#RFC6242" class="cite xref">RFC6242</a>]</span>. The lowest RESTCONF layer is HTTPS, and the mandatory-to-implement secure transport is TLS <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">The Network Configuration Access Control Model (NACM) <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span> provides the means to restrict access for particular NETCONF or RESTCONF users to a preconfigured subset of all available NETCONF or RESTCONF protocol operations and content.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">In the YANG modules published with this document, there is no configuration, state data, new RPCs or notifications.  This document defines additional XML attributes and headers, however, that merit consideration from a security perspective.<a href="#section-7-3" class="pilcrow">¶</a></p>
<div id="nacm-access-control">
<section id="section-7.1">
        <h3 id="name-nacm-access-control">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-nacm-access-control" class="section-name selfRef">NACM Access Control</a>
        </h3>
<p id="section-7.1-1">NACM, <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>, access control
processing happens as usual, independently of any txid handling, if
supported by the server and enabled by the NACM configuration.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">It should be pointed out however, that when txid information is added
to a reply, it may occasionally be possible for a client to deduce
that a configuration change has happened in some part of the
configuration to which it has no access rights.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1-3">For example, a client may notice that the root node txid has changed
while none of the subtrees it has access to have changed, and thereby
conclude that someone else has made a change to some part of the
configuration that is not acessible by the client.<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<div id="hash-based-txid-algorithms">
<section id="section-7.1.1">
          <h4 id="name-hash-based-txid-algorithms">
<a href="#section-7.1.1" class="section-number selfRef">7.1.1. </a><a href="#name-hash-based-txid-algorithms" class="section-name selfRef">Hash-based Txid Algorithms</a>
          </h4>
<p id="section-7.1.1-1">Servers that implement NACM and choose to implement a hash-based txid
algorithm over the configuration may reveal to a client that the
configuration of a subtree that the client has no access to is the
same as it was at an earlier point in time.<a href="#section-7.1.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1.1-2">For example, a client with partial access to the configuration might
observe that the root node txid was 1234. After a few configuration
changes by other parties, the client may again observe that the root
node txid is 1234.  It may then deduce that the configuration is the
same as earlier, even in the parts of the configuration it has no
access to.<a href="#section-7.1.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1.1-3">In some use cases, this behavior may be considered a feature, since it
allows a security client to verify that the configuration is the same
as expected, without transmitting or storing the actual configuration.<a href="#section-7.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="unchanged-configuration">
<section id="section-7.2">
        <h3 id="name-unchanged-configuration">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-unchanged-configuration" class="section-name selfRef">Unchanged Configuration</a>
        </h3>
<p id="section-7.2-1">It will also be possible for clients to deduce that a configuration
change has not happened during some period, by simply observing that
the root node (or other subtree) txid remains unchanged.  This is
true regardless of NACM being deployed or choice of txid algorithm.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">Again, there may be use cases where this behavior may be considered a
feature, since it allows a security client to verify that the
configuration is the same as expected, without transmitting or storing
the actual configuration.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">This document registers the following capability identifier URN in
the 'Network Configuration Protocol (NETCONF) Capability URNs'
registry:<a href="#section-8-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-2">
<pre>
  urn:ietf:params:netconf:capability:txid:1.0
</pre><a href="#section-8-2" class="pilcrow">¶</a>
</div>
<p id="section-8-3">This document registers four XML namespace URNs in the 'IETF XML
registry', following the format defined in
<span>[<a href="#RFC3688" class="cite xref">RFC3688</a>]</span>.<a href="#section-8-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-4">
<pre>
  URI: urn:ietf:params:xml:ns:netconf:txid:1.0

  URI: urn:ietf:params:xml:ns:yang:ietf-netconf-txid

  URI: urn:ietf:params:xml:ns:yang:ietf-netconf-txid-yang-push

  URI: urn:ietf:params:xml:ns:yang:ietf-netconf-txid-nmda-compare

  Registrant Contact: The IESG.

  XML: N/A, the requested URIs are XML namespaces.
</pre><a href="#section-8-4" class="pilcrow">¶</a>
</div>
<p id="section-8-5">This document registers three module names in the 'YANG Module Names'
registry, defined in <span>[<a href="#RFC6020" class="cite xref">RFC6020</a>]</span>.<a href="#section-8-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-6">
<pre>
  name: ietf-netconf-txid

  prefix: ietf-netconf-txid

  namespace: urn:ietf:params:xml:ns:yang:ietf-netconf-txid

  RFC: XXXX
</pre><a href="#section-8-6" class="pilcrow">¶</a>
</div>
<p id="section-8-7">and<a href="#section-8-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-8">
<pre>
  name: ietf-netconf-txid-yp

  prefix: ietf-netconf-txid-yp

  namespace: urn:ietf:params:xml:ns:yang:ietf-netconf-txid-yang-push

  RFC: XXXX
</pre><a href="#section-8-8" class="pilcrow">¶</a>
</div>
<p id="section-8-9">and<a href="#section-8-9" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-10">
<pre>
  name: ietf-netconf-txid-nmda-compare

  prefix: ietf-netconf-txid-nmda-compare

  namespace:
    urn:ietf:params:xml:ns:yang:ietf-netconf-txid-nmda-compare

  RFC: XXXX
</pre><a href="#section-8-10" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="changes">
<section id="section-9">
      <h2 id="name-changes">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-changes" class="section-name selfRef">Changes</a>
      </h2>
<div id="major-changes-in-04-since-03">
<section id="section-9.1">
        <h3 id="name-major-changes-in-04-since-0">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-major-changes-in-04-since-0" class="section-name selfRef">Major changes in -04 since -03</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-9.1-1.1">
            <p id="section-9.1-1.1.1">Updated security considerations.<a href="#section-9.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.1-1.2">
            <p id="section-9.1-1.2.1">Added several normative RFC references.<a href="#section-9.1-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="major-changes-in-03-since-02">
<section id="section-9.2">
        <h3 id="name-major-changes-in-03-since-0">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-major-changes-in-03-since-0" class="section-name selfRef">Major changes in -03 since -02</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-9.2-1.1">
            <p id="section-9.2-1.1.1">Updated language slightly regarding format of etag values, and some
recommendations for implementors that support etags in multiple management
protocols (NETCONF, RESTCONF, ...) and encodings (XML, JSON, ...).<a href="#section-9.2-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.2-1.2">
            <p id="section-9.2-1.2.1">Added missing normative RFC references.<a href="#section-9.2-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.2-1.3">
            <p id="section-9.2-1.3.1">Corrected the YANG-push namespace reference.<a href="#section-9.2-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="major-changes-in-02-since-01">
<section id="section-9.3">
        <h3 id="name-major-changes-in-02-since-0">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-major-changes-in-02-since-0" class="section-name selfRef">Major changes in -02 since -01</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-9.3-1.1">
            <p id="section-9.3-1.1.1">Added optional to implement Txid History concept in order to make
the algorithm both more efficient and less verbose.  Servers may
still choose a Txid History size of zero, which makes the server
behavior the same as in earlier versions of this document.
Implementations that use txids consisting of a monotonically
increasing integer or timestamp will be able to determine the sequnce
of transactions in the history directly, making this trivially simple
to implement.<a href="#section-9.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.3-1.2">
            <p id="section-9.3-1.2.1">Added extension statement versioned-node, which servers may use to
declare which YANG tree nodes are Versioned Nodes.  This is entirely
optional, however, but possibly useful to client developers.<a href="#section-9.3-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.3-1.3">
            <p id="section-9.3-1.3.1">Renamed YANG feature ietf-netconf-txid:txid-last-modified to
ietf-netconf-txid:last-modified in order to reduce redundant mentions
of "txid".<a href="#section-9.3-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="major-changes-in-01-since-00">
<section id="section-9.4">
        <h3 id="name-major-changes-in-01-since-0">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-major-changes-in-01-since-0" class="section-name selfRef">Major changes in -01 since -00</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-9.4-1.1">
            <p id="section-9.4-1.1.1">Changed YANG-push txid mechanism to use a simple leaf rather than
an attribute to convey txid information.  This is preferable since
YANG-push content may be requested using other protocols than NETCONF
and other encodings than XML.  By removing the need for XML
attributes in this context, the mechanism becomes significantly
more portable.<a href="#section-9.4-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-1.2">
            <p id="section-9.4-1.2.1">Added a section and YANG module augmenting the RFC9144 NMDA
datastore compare operation to allow request and reply with txid
information.  This too is done with augments of plain leafs for
maximum portability.<a href="#section-9.4-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-1.3">
            <p id="section-9.4-1.3.1">Added note clarifying that the txid attributes used in the XML
encoding are never used in JSON (since RESTCONF uses HTTP headers
instead).<a href="#section-9.4-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-1.4">
            <p id="section-9.4-1.4.1">Added note clarifying that pruning happens when client and server
txids <em>match</em>, since the server sending information to the client
only makes sense when the information on the client is out of date.<a href="#section-9.4-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-1.5">
            <p id="section-9.4-1.5.1">Added note clarifying that this entire document is about config
true data only.<a href="#section-9.4-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-1.6">
            <p id="section-9.4-1.6.1">Rephrased slightly when referring to the candidate datastore to
keep making sense in the event that private candidate datastores
become a reality in the future.<a href="#section-9.4-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-1.7">
            <p id="section-9.4-1.7.1">Added a note early on to more clearly lay out the structure of this
document, with a first part about the generic mechanism part, and a
second part about the two specific txid mechanisms.<a href="#section-9.4-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-1.8">
            <p id="section-9.4-1.8.1">Corrected acl data model examples to conform to their YANG module.<a href="#section-9.4-1.8.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="major-changes-in-draft-ietf-netconf-transaction-id-00-since-02">
<section id="section-9.5">
        <h3 id="name-major-changes-in-draft-ietf">
<a href="#section-9.5" class="section-number selfRef">9.5. </a><a href="#name-major-changes-in-draft-ietf" class="section-name selfRef">Major changes in draft-ietf-netconf-transaction-id-00 since -02</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-9.5-1.1">
            <p id="section-9.5-1.1.1">Changed the logic around how txids are handled in the candidate
datastore, both when reading (get-config, get-data) and writing
(edit-config, edit-data). Introduced a special "txid-unknown"
value "!".<a href="#section-9.5-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.2">
            <p id="section-9.5-1.2.1">Changed the logic of copy-config to be similar to edit-config.<a href="#section-9.5-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.3">
            <p id="section-9.5-1.3.1">Clarified how txid values interact with when-dependencies
together with default values.<a href="#section-9.5-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.4">
            <p id="section-9.5-1.4.1">Added content to security considerations.<a href="#section-9.5-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.5">
            <p id="section-9.5-1.5.1">Added a high-level example for YANG-Push subscriptions with txid.<a href="#section-9.5-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.6">
            <p id="section-9.5-1.6.1">Updated language about error-info sent at txid mismatch in an
edit-config: error-info with mismatch details MUST be sent when
mismatch detected, and that the server can choose one of the txid
mismatch occurrences if there is more than one.<a href="#section-9.5-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.7">
            <p id="section-9.5-1.7.1">Some rewording and minor additions for clarification, based
on mailing list feedback.<a href="#section-9.5-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.8">
            <p id="section-9.5-1.8.1">Divided RFC references into normative and informative.<a href="#section-9.5-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.5-1.9">
            <p id="section-9.5-1.9.1">Corrected a logic error in the second figure (figure 6) in the
"Conditional Transactions" section<a href="#section-9.5-1.9.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="major-changes-in-02-since-01-1">
<section id="section-9.6">
        <h3 id="name-major-changes-in-02-since-01">
<a href="#section-9.6" class="section-number selfRef">9.6. </a><a href="#name-major-changes-in-02-since-01" class="section-name selfRef">Major changes in -02 since -01</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-9.6-1.1">
            <p id="section-9.6-1.1.1">A last-modified txid mechanism has been added (back).  This
mechanism aligns well with the Last-Modified mechanism defined in
RESTCONF <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>,
but is not a carbon copy.<a href="#section-9.6-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.2">
            <p id="section-9.6-1.2.1">YANG-Push functionality has been added.  This allows YANG-Push
users to receive txid updates as part of the configuration updates.
This functionality comes in a separate YANG module, to allow
implementors to cleanly keep all this functionality out.<a href="#section-9.6-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.3">
            <p id="section-9.6-1.3.1">Changed name of "versioned elements". They are now called
"Versioned Nodes".<a href="#section-9.6-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.4">
            <p id="section-9.6-1.4.1">Clarified txid behavior for transactions toward the Candidate
datastore, and some not so common situations, such
as when a client specifies a txid for a non-versioned node, and
when there are when-statement dependencies across subtrees.<a href="#section-9.6-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.5">
            <p id="section-9.6-1.5.1">Examples provided for the abstract mechanism level with simple
message flow diagrams.<a href="#section-9.6-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.6">
            <p id="section-9.6-1.6.1">More examples on protocol level, and with ietf-interfaces as
example target module replaced with ietf-access-control to reduce
confusion.<a href="#section-9.6-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.7">
            <p id="section-9.6-1.7.1">Explicit list of XPaths to clearly state where etag or
last-modified attributes may be added by clients and servers.<a href="#section-9.6-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.8">
            <p id="section-9.6-1.8.1">Document introduction restructured to remove duplication between
sections and to allow multiple (etag and last-modified) txid
mechanisms.<a href="#section-9.6-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.6-1.9">
            <p id="section-9.6-1.9.1">Moved the actual YANG module code into proper module files that
are included in the source document.  These modules can be compiled
as proper modules without any extraction tools.<a href="#section-9.6-1.9.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="major-changes-in-01-since-00-1">
<section id="section-9.7">
        <h3 id="name-major-changes-in-01-since-00">
<a href="#section-9.7" class="section-number selfRef">9.7. </a><a href="#name-major-changes-in-01-since-00" class="section-name selfRef">Major changes in -01 since -00</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-9.7-1.1">
            <p id="section-9.7-1.1.1">Updated the text on numerous points in order to answer questions
that appeared on the mailing list.<a href="#section-9.7-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.2">
            <p id="section-9.7-1.2.1">Changed the document structure into a general transaction id part
and one etag specific part.<a href="#section-9.7-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.3">
            <p id="section-9.7-1.3.1">Renamed entag attribute to etag, prefix to txid, namespace to
urn:ietf:params:xml:ns:yang:ietf-netconf-txid.<a href="#section-9.7-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.4">
            <p id="section-9.7-1.4.1">Set capability string to
urn:ietf:params:netconf:capability:txid:1.0<a href="#section-9.7-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.5">
            <p id="section-9.7-1.5.1">Changed YANG module name, namespace and prefix to match names above.<a href="#section-9.7-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.6">
            <p id="section-9.7-1.6.1">Harmonized/slightly adjusted etag value space with RFC 7232 and
RFC 8040.<a href="#section-9.7-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.7">
            <p id="section-9.7-1.7.1">Removed all text discussing etag values provided by the client
(although this is still an interesting idea, if you ask the author)<a href="#section-9.7-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.8">
            <p id="section-9.7-1.8.1">Clarified the etag attribute mechanism, especially when it comes to
matching against non-versioned elements, its cascading upwards in the
tree and secondary effects from when- and choice-statements.<a href="#section-9.7-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.9">
            <p id="section-9.7-1.9.1">Added a mechanism for returning the server assigned etag value in
get-config and get-data.<a href="#section-9.7-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.10">
            <p id="section-9.7-1.10.1">Added section describing how the NETCONF discard-changes,
copy-config, delete-config and commit operations work with respect to
etags.<a href="#section-9.7-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.11">
            <p id="section-9.7-1.11.1">Added IANA Considerations section.<a href="#section-9.7-1.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.7-1.12">
            <p id="section-9.7-1.12.1">Removed all comments about open questions.<a href="#section-9.7-1.12.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4741">[RFC4741]</dt>
        <dd>
<span class="refAuthor">Enns, R., Ed.</span>, <span class="refTitle">"NETCONF Configuration Protocol"</span>, <span class="seriesInfo">RFC 4741</span>, <span class="seriesInfo">DOI 10.17487/RFC4741</span>, <time datetime="2006-12" class="refDate">December 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4741">https://www.rfc-editor.org/rfc/rfc4741</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6241">[RFC6241]</dt>
        <dd>
<span class="refAuthor">Enns, R., Ed.</span>, <span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refAuthor">Schoenwaelder, J., Ed.</span>, and <span class="refAuthor">A. Bierman, Ed.</span>, <span class="refTitle">"Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6241</span>, <span class="seriesInfo">DOI 10.17487/RFC6241</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6241">https://www.rfc-editor.org/rfc/rfc6241</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6242">[RFC6242]</dt>
        <dd>
<span class="refAuthor">Wasserman, M.</span>, <span class="refTitle">"Using the NETCONF Protocol over Secure Shell (SSH)"</span>, <span class="seriesInfo">RFC 6242</span>, <span class="seriesInfo">DOI 10.17487/RFC6242</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6242">https://www.rfc-editor.org/rfc/rfc6242</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6991">[RFC6991]</dt>
        <dd>
<span class="refAuthor">Schoenwaelder, J., Ed.</span>, <span class="refTitle">"Common YANG Data Types"</span>, <span class="seriesInfo">RFC 6991</span>, <span class="seriesInfo">DOI 10.17487/RFC6991</span>, <time datetime="2013-07" class="refDate">July 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6991">https://www.rfc-editor.org/rfc/rfc6991</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7950">[RFC7950]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refTitle">"The YANG 1.1 Data Modeling Language"</span>, <span class="seriesInfo">RFC 7950</span>, <span class="seriesInfo">DOI 10.17487/RFC7950</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7950">https://www.rfc-editor.org/rfc/rfc7950</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8040">[RFC8040]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Bjorklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"RESTCONF Protocol"</span>, <span class="seriesInfo">RFC 8040</span>, <span class="seriesInfo">DOI 10.17487/RFC8040</span>, <time datetime="2017-01" class="refDate">January 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8040">https://www.rfc-editor.org/rfc/rfc8040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8072">[RFC8072]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Bjorklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"YANG Patch Media Type"</span>, <span class="seriesInfo">RFC 8072</span>, <span class="seriesInfo">DOI 10.17487/RFC8072</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8072">https://www.rfc-editor.org/rfc/rfc8072</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8341">[RFC8341]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span> and <span class="refAuthor">M. Bjorklund</span>, <span class="refTitle">"Network Configuration Access Control Model"</span>, <span class="seriesInfo">STD 91</span>, <span class="seriesInfo">RFC 8341</span>, <span class="seriesInfo">DOI 10.17487/RFC8341</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8341">https://www.rfc-editor.org/rfc/rfc8341</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8526">[RFC8526]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M.</span>, <span class="refAuthor">Schoenwaelder, J.</span>, <span class="refAuthor">Shafer, P.</span>, <span class="refAuthor">Watsen, K.</span>, and <span class="refAuthor">R. Wilton</span>, <span class="refTitle">"NETCONF Extensions to Support the Network Management Datastore Architecture"</span>, <span class="seriesInfo">RFC 8526</span>, <span class="seriesInfo">DOI 10.17487/RFC8526</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8526">https://www.rfc-editor.org/rfc/rfc8526</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8639">[RFC8639]</dt>
        <dd>
<span class="refAuthor">Voit, E.</span>, <span class="refAuthor">Clemm, A.</span>, <span class="refAuthor">Gonzalez Prieto, A.</span>, <span class="refAuthor">Nilsen-Nygaard, E.</span>, and <span class="refAuthor">A. Tripathy</span>, <span class="refTitle">"Subscription to YANG Notifications"</span>, <span class="seriesInfo">RFC 8639</span>, <span class="seriesInfo">DOI 10.17487/RFC8639</span>, <time datetime="2019-09" class="refDate">September 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8639">https://www.rfc-editor.org/rfc/rfc8639</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8641">[RFC8641]</dt>
        <dd>
<span class="refAuthor">Clemm, A.</span> and <span class="refAuthor">E. Voit</span>, <span class="refTitle">"Subscription to YANG Notifications for Datastore Updates"</span>, <span class="seriesInfo">RFC 8641</span>, <span class="seriesInfo">DOI 10.17487/RFC8641</span>, <time datetime="2019-09" class="refDate">September 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8641">https://www.rfc-editor.org/rfc/rfc8641</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8791">[RFC8791]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Björklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"YANG Data Structure Extensions"</span>, <span class="seriesInfo">RFC 8791</span>, <span class="seriesInfo">DOI 10.17487/RFC8791</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8791">https://www.rfc-editor.org/rfc/rfc8791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9144">[RFC9144]</dt>
      <dd>
<span class="refAuthor">Clemm, A.</span>, <span class="refAuthor">Qu, Y.</span>, <span class="refAuthor">Tantsura, J.</span>, and <span class="refAuthor">A. Bierman</span>, <span class="refTitle">"Comparison of Network Management Datastore Architecture (NMDA) Datastores"</span>, <span class="seriesInfo">RFC 9144</span>, <span class="seriesInfo">DOI 10.17487/RFC9144</span>, <time datetime="2021-12" class="refDate">December 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9144">https://www.rfc-editor.org/rfc/rfc9144</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC3688">[RFC3688]</dt>
        <dd>
<span class="refAuthor">Mealling, M.</span>, <span class="refTitle">"The IETF XML Registry"</span>, <span class="seriesInfo">BCP 81</span>, <span class="seriesInfo">RFC 3688</span>, <span class="seriesInfo">DOI 10.17487/RFC3688</span>, <time datetime="2004-01" class="refDate">January 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3688">https://www.rfc-editor.org/rfc/rfc3688</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6020">[RFC6020]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refTitle">"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6020</span>, <span class="seriesInfo">DOI 10.17487/RFC6020</span>, <time datetime="2010-10" class="refDate">October 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6020">https://www.rfc-editor.org/rfc/rfc6020</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7232">[RFC7232]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span> and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests"</span>, <span class="seriesInfo">RFC 7232</span>, <span class="seriesInfo">DOI 10.17487/RFC7232</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7232">https://www.rfc-editor.org/rfc/rfc7232</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7952">[RFC7952]</dt>
      <dd>
<span class="refAuthor">Lhotka, L.</span>, <span class="refTitle">"Defining and Using Metadata with YANG"</span>, <span class="seriesInfo">RFC 7952</span>, <span class="seriesInfo">DOI 10.17487/RFC7952</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7952">https://www.rfc-editor.org/rfc/rfc7952</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
<div id="acknowledgments">
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">The author wishes to thank Benoît Claise for making this work happen,
and the following individuals, who all provided helpful comments:
Per Andersson, James Cumming, Kent Watsen, Andy Bierman, Robert Wilton,
Qiufang Ma, Jason Sterne and Robert Varga.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jan Lindblad</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jlindbla@cisco.com" class="email">jlindbla@cisco.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
